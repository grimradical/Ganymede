<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_20) on Wed Sep 29 01:39:37 CDT 2010 -->
<TITLE>
DBLock
</TITLE>

<META NAME="date" CONTENT="2010-09-29">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DBLock";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/DBLock.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBLinkTracker.DBLinkTrackerSession.html" title="class in arlut.csd.ganymede.server"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBLockSync.html" title="class in arlut.csd.ganymede.server"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?arlut/csd/ganymede/server/DBLock.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DBLock.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
arlut.csd.ganymede.server</FONT>
<BR>
Class DBLock</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>arlut.csd.ganymede.server.DBLock</B>
</PRE>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../../arlut/csd/ganymede/server/DBDumpLock.html" title="class in arlut.csd.ganymede.server">DBDumpLock</A>, <A HREF="../../../../arlut/csd/ganymede/server/DBReadLock.html" title="class in arlut.csd.ganymede.server">DBReadLock</A>, <A HREF="../../../../arlut/csd/ganymede/server/DBWriteLock.html" title="class in arlut.csd.ganymede.server">DBWriteLock</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public abstract class <B>DBLock</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
DBLocks arbitrate access to <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBase</CODE></A> objects in the
 Ganymede server's <A HREF="../../../../arlut/csd/ganymede/server/DBStore.html" title="class in arlut.csd.ganymede.server"><CODE>DBStore</CODE></A>.

 Threads wishing to read from, dump, or update object bases in the
 DBStore must be in possession of an established DBLock.

 The general scheme is that any number of readers and/or dumpers can
 read from an object base simultaneously.  If a DBWriteLock to
 establish on an object base, all active readers are allowed to
 complete their reading, but no new read lock may be established
 until the writer has a chance to get in and make its update and
 then signals completion by calling release().  Writers are given
 priority in the DBLock queue over readers.
 
 Similarly, if there are a number of writer locks queued up for
 update access to a DBObjectBase in the DBStore when a thread
 attempts to establish a DBDumpLock, those writers are allowed to
 complete their updates, but no new writer is queued until the dump
 thread finishes dumping the locked bases.

 All of this priority logic is implemented in the establish()
 methods of the concrete DBLock subclasses.

 As mentioned above, all DBLock's are issued in the context of one
 or more <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBase</CODE></A>
 objects.  The DBObjectBases are actually the things being locked.
 To maintain multi-threaded safety of the lock system across
 multiple DBObjectBases, the DBLock <A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#establish(java.lang.Object)"><CODE>establish()</CODE></A> and <A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#release()"><CODE>release()</CODE></A> methods (as implemented in <A HREF="../../../../arlut/csd/ganymede/server/DBReadLock.html" title="class in arlut.csd.ganymede.server"><CODE>DBReadLock</CODE></A>, <A HREF="../../../../arlut/csd/ganymede/server/DBReadLock.html" title="class in arlut.csd.ganymede.server"><CODE>DBWriteLock</CODE></A>, and <A HREF="../../../../arlut/csd/ganymede/server/DBReadLock.html" title="class in arlut.csd.ganymede.server"><CODE>DBDumpLock</CODE></A>) are all
 synchronized on the Ganymede's DBStore object.  This
 synchronization is critical for the proper functioning of the
 DBLock system.
 
 There is currently no support for handling timeouts, and locks can
 persist indefinitely.  However, the <A HREF="../../../../arlut/csd/ganymede/server/GanymedeSession.html" title="class in arlut.csd.ganymede.server"><CODE>GanymedeSession</CODE></A> class
 will detect a client that has died, and will properly clean up any
 locks held by the user.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#abort">abort</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Will be true if a DBLock has had its abort() method called.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;java.util.Vector&lt;<A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server">DBObjectBase</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#baseSet">baseSet</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In order to prevent deadlocks, each individual lock must be
 established on all applicable <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBases</CODE></A> at the time
 the lock is initially established.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#inEstablish">inEstablish</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Will be true while a DBLock is in the process of being established.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;java.lang.Object</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#key">key</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All DBLock's have an identifier key, which is used to identify
 the lock in the <A HREF="../../../../arlut/csd/ganymede/server/DBStore.html" title="class in arlut.csd.ganymede.server"><CODE>DBStore</CODE></A>'s <A HREF="../../../../arlut/csd/ganymede/server/DBLockSync.html" title="class in arlut.csd.ganymede.server"><CODE>DBLockSync</CODE></A> object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#locked">locked</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Will be true if a DBLock is successfully locked.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBLockSync.html" title="class in arlut.csd.ganymede.server">DBLockSync</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#lockSync">lockSync</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All DBLock's establish() and release() methods synchronize their
 critical sections on a singleton DBLockSync object held in the
 Ganymede server's DBStore object in order to guarantee that all
 lock negotiations are thread-safe.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#DBLock()">DBLock</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) abstract &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#abort()">abort</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abort this lock;  if any thread is waiting in establish() on this
 lock when abort() is called, that thread's call to establish() will
 fail with an InterruptedException.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) abstract &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#establish(java.lang.Object)">establish</A></B>(java.lang.Object&nbsp;key)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method waits until the lock can be established.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;java.lang.Object</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#getKey()">getKey</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the key that this lock is established with,
 or null if the lock has not been established.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#isLocked()">isLocked</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the lock has been established and not
 yet aborted / released.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#isLocked(arlut.csd.ganymede.server.DBObjectBase)">isLocked</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server">DBObjectBase</A>&nbsp;base)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the lock has the given
 <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBase</CODE></A>
 locked.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#isLocked(java.util.Vector)">isLocked</A></B>(java.util.Vector&lt;<A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server">DBObjectBase</A>&gt;&nbsp;bases)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the lock has all of the 
 <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBase</CODE></A>
 objects in the provided Vector locked.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#overlaps(java.util.Vector)">overlaps</A></B>(java.util.Vector&lt;<A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server">DBObjectBase</A>&gt;&nbsp;bases)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the lock has any of the 
 <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBase</CODE></A>
 objects in the provided Vector locked.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) abstract &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#release()">release</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unlock the bases held by this lock.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#toString()">toString</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a string describing this lock for use in debug messages</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="key"><!-- --></A><H3>
key</H3>
<PRE>
java.lang.Object <B>key</B></PRE>
<DL>
<DD>All DBLock's have an identifier key, which is used to identify
 the lock in the <A HREF="../../../../arlut/csd/ganymede/server/DBStore.html" title="class in arlut.csd.ganymede.server"><CODE>DBStore</CODE></A>'s <A HREF="../../../../arlut/csd/ganymede/server/DBLockSync.html" title="class in arlut.csd.ganymede.server"><CODE>DBLockSync</CODE></A> object.  The establish() methods in the DBLock
 subclasses consult the DBStore.lockSync to make sure that no
 <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server"><CODE>DBSession</CODE></A> ever
 possesses more than one write lock, to prevent deadlocks from
 occuring in the server.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="lockSync"><!-- --></A><H3>
lockSync</H3>
<PRE>
<A HREF="../../../../arlut/csd/ganymede/server/DBLockSync.html" title="class in arlut.csd.ganymede.server">DBLockSync</A> <B>lockSync</B></PRE>
<DL>
<DD>All DBLock's establish() and release() methods synchronize their
 critical sections on a singleton DBLockSync object held in the
 Ganymede server's DBStore object in order to guarantee that all
 lock negotiations are thread-safe.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="baseSet"><!-- --></A><H3>
baseSet</H3>
<PRE>
java.util.Vector&lt;<A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server">DBObjectBase</A>&gt; <B>baseSet</B></PRE>
<DL>
<DD>In order to prevent deadlocks, each individual lock must be
 established on all applicable <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBases</CODE></A> at the time
 the lock is initially established.  baseSet is the Vector of
 DBObjectBases that this DBLock is/will be locked on.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="locked"><!-- --></A><H3>
locked</H3>
<PRE>
boolean <B>locked</B></PRE>
<DL>
<DD>Will be true if a DBLock is successfully locked.

 Should not be directly accessed outside of the DBLock class
 hierarchy (unfortunately Java has no support for 'accessible to
 subclasses only').
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="abort"><!-- --></A><H3>
abort</H3>
<PRE>
boolean <B>abort</B></PRE>
<DL>
<DD>Will be true if a DBLock has had its abort() method called.  Once
 aborted, a lock may never be re-established; the locking code
 must create a new lock.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="inEstablish"><!-- --></A><H3>
inEstablish</H3>
<PRE>
boolean <B>inEstablish</B></PRE>
<DL>
<DD>Will be true while a DBLock is in the process of being established.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="DBLock()"><!-- --></A><H3>
DBLock</H3>
<PRE>
public <B>DBLock</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="isLocked()"><!-- --></A><H3>
isLocked</H3>
<PRE>
boolean <B>isLocked</B>()</PRE>
<DL>
<DD>Returns true if the lock has been established and not
 yet aborted / released.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isLocked(arlut.csd.ganymede.server.DBObjectBase)"><!-- --></A><H3>
isLocked</H3>
<PRE>
boolean <B>isLocked</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server">DBObjectBase</A>&nbsp;base)</PRE>
<DL>
<DD>Returns true if the lock has the given
 <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBase</CODE></A>
 locked.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isLocked(java.util.Vector)"><!-- --></A><H3>
isLocked</H3>
<PRE>
boolean <B>isLocked</B>(java.util.Vector&lt;<A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server">DBObjectBase</A>&gt;&nbsp;bases)</PRE>
<DL>
<DD>Returns true if the lock has all of the 
 <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBase</CODE></A>
 objects in the provided Vector locked.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="overlaps(java.util.Vector)"><!-- --></A><H3>
overlaps</H3>
<PRE>
boolean <B>overlaps</B>(java.util.Vector&lt;<A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server">DBObjectBase</A>&gt;&nbsp;bases)</PRE>
<DL>
<DD>Returns true if the lock has any of the 
 <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBase</CODE></A>
 objects in the provided Vector locked.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="establish(java.lang.Object)"><!-- --></A><H3>
establish</H3>
<PRE>
abstract void <B>establish</B>(java.lang.Object&nbsp;key)
                 throws java.lang.InterruptedException</PRE>
<DL>
<DD><P>This method waits until the lock can be established.  The
 <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBases</CODE></A> locked
 are specified in the constructor of the implementation subclass
 (<A HREF="../../../../arlut/csd/ganymede/server/DBReadLock.html" title="class in arlut.csd.ganymede.server"><CODE>DBReadLock</CODE></A>,
 <A HREF="../../../../arlut/csd/ganymede/server/DBWriteLock.html" title="class in arlut.csd.ganymede.server"><CODE>DBWriteLock</CODE></A>, or
 <A HREF="../../../../arlut/csd/ganymede/server/DBDumpLock.html" title="class in arlut.csd.ganymede.server"><CODE>DBDumpLock</CODE></A>).</P>

 <P>A thread that calls establish() will be suspended (waiting
 on the server's <A HREF="../../../../arlut/csd/ganymede/server/DBStore.html" title="class in arlut.csd.ganymede.server"><CODE>DBStore</CODE></A> until 
 all DBObjectBases listed in the DBLock's constructor are available
 to be locked.  At that point, the thread blocking on establish()
 will wake up possessing a lock on the requested DBObjectBases.</P>

 <P>It is possible for the establish() to fail completely.. the
 admin console may reject a client whose thread is blocking on
 establish(), for instance, or the server may be shut down.  In
 those cases, another thread may call the DBLock's
 <A HREF="../../../../arlut/csd/ganymede/server/DBLock.html#abort()"><CODE>abort()</CODE></A> method, in
 which case
 establish() will throw an InterruptedException, and the lock will
 not be established.</P>
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.lang.InterruptedException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="release()"><!-- --></A><H3>
release</H3>
<PRE>
abstract void <B>release</B>()</PRE>
<DL>
<DD>Unlock the bases held by this lock.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="abort()"><!-- --></A><H3>
abort</H3>
<PRE>
abstract void <B>abort</B>()</PRE>
<DL>
<DD>Abort this lock;  if any thread is waiting in establish() on this
 lock when abort() is called, that thread's call to establish() will
 fail with an InterruptedException.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getKey()"><!-- --></A><H3>
getKey</H3>
<PRE>
java.lang.Object <B>getKey</B>()</PRE>
<DL>
<DD>Returns the key that this lock is established with,
 or null if the lock has not been established.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="toString()"><!-- --></A><H3>
toString</H3>
<PRE>
public java.lang.String <B>toString</B>()</PRE>
<DL>
<DD><p>Returns a string describing this lock for use in debug messages</p>
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>toString</CODE> in class <CODE>java.lang.Object</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/DBLock.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBLinkTracker.DBLinkTrackerSession.html" title="class in arlut.csd.ganymede.server"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBLockSync.html" title="class in arlut.csd.ganymede.server"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?arlut/csd/ganymede/server/DBLock.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DBLock.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
