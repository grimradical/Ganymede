<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_20) on Wed Sep 29 01:39:37 CDT 2010 -->
<TITLE>
DBJournal
</TITLE>

<META NAME="date" CONTENT="2010-09-29">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DBJournal";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/DBJournal.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBField.html" title="class in arlut.csd.ganymede.server"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?arlut/csd/ganymede/server/DBJournal.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DBJournal.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
arlut.csd.ganymede.server</FONT>
<BR>
Class DBJournal</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>arlut.csd.ganymede.server.DBJournal</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../arlut/csd/ganymede/common/ObjectStatus.html" title="interface in arlut.csd.ganymede.common">ObjectStatus</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>DBJournal</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../arlut/csd/ganymede/common/ObjectStatus.html" title="interface in arlut.csd.ganymede.common">ObjectStatus</A></DL>
</PRE>

<P>
The DBJournal class is used to provide journalling of changes to the
 <A HREF="../../../../arlut/csd/ganymede/server/DBStore.html" title="class in arlut.csd.ganymede.server"><CODE>DBStore</CODE></A>
 during operations.  The Journal file will contain a complete list of all
 changes made since the last dump of the complete DBStore.  The Journal file
 is composed of a header block followed by a number of transactions.

 Each transaction consists of a number of object modification records, each
 record specifying the creation, deletion, or modification of a particular
 object.  At the end of the transaction, a marker indicates the completion of
 the transaction.  At DBStore startup time, the journal is read in and all
 complete transactions recorded are performed on the main DBStore.

 Generally, if the DBStore was shut down correctly, the entire memory
 structure of the DBStore will be cleanly dumped out and the Journal will
 be removed.  The Journal is intended to insure that the DBStore remains
 transaction consistent if the server running Ganymede crashes during
 runtime.

 See the <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server"><CODE>DBEditSet</CODE></A> class for
 more information on Ganymede transactions.

 Nota bene: this class includes synchronized methods which serialize
 operations on the Ganymede transaction journal.  The DBJournal
 monitor is intended to be the innermost monitor for operations
 involving the DBStore and DBJournal objects.  Synchronized methods
 in DBJournal must not call synchronized methods on DBStore, as
 synchronized DBStore methods can and will call methods on
 DBJournal.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#CLOSETRANS">CLOSETRANS</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#CREATE">CREATE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#debug">debug</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#DELETE">DELETE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#dirty">dirty</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#EDIT">EDIT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;short</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#file_major_version">file_major_version</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;short</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#file_minor_version">file_minor_version</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#filename">filename</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#FINALIZE">FINALIZE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#id_string">id_string</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server">DBJournalTransaction</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#incompleteTransaction">incompleteTransaction</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;java.io.RandomAccessFile</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#jFile">jFile</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;short</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#major_version">major_version</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;short</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#minor_version">minor_version</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#OPENTRANS">OPENTRANS</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBStore.html" title="class in arlut.csd.ganymede.server">DBStore</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#store">store</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#transactionsInJournal">transactionsInJournal</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;<A HREF="../../../../arlut/csd/Util/TranslationService.html" title="class in arlut.csd.Util">TranslationService</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#ts">ts</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TranslationService object for handling string localization in
 the Ganymede server.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_arlut.csd.ganymede.common.ObjectStatus"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from interface arlut.csd.ganymede.common.<A HREF="../../../../arlut/csd/ganymede/common/ObjectStatus.html" title="interface in arlut.csd.ganymede.common">ObjectStatus</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../arlut/csd/ganymede/common/ObjectStatus.html#CREATING">CREATING</A>, <A HREF="../../../../arlut/csd/ganymede/common/ObjectStatus.html#DELETING">DELETING</A>, <A HREF="../../../../arlut/csd/ganymede/common/ObjectStatus.html#DROPPING">DROPPING</A>, <A HREF="../../../../arlut/csd/ganymede/common/ObjectStatus.html#EDITING">EDITING</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#DBJournal(arlut.csd.ganymede.server.DBStore, java.lang.String)">DBJournal</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBStore.html" title="class in arlut.csd.ganymede.server">DBStore</A>&nbsp;store,
          java.lang.String&nbsp;filename)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The DBJournal constructor takes a filename and creates a DBJournal object.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#clearIncompleteTransaction()">clearIncompleteTransaction</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;After the Ganymede main() method has tried to clean out any
 remaining bits of the non-finalized transaction, it will need
 to clear the incompleteTransaction record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#finalizeTransaction(arlut.csd.ganymede.server.DBJournalTransaction)">finalizeTransaction</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server">DBJournalTransaction</A>&nbsp;transRecord)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The finalizeTransaction() method actually performs the full work of
 writing out a transaction to the DBStore Journal.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server">DBJournalTransaction</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#getIncompleteTransaction()">getIncompleteTransaction</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the journal contained a persisted but not finalized
 transaction when we tried to load it, this method will return a
 DBJournalTransaction containing enough information that the
 Ganymede main() method can iterate over the defined sync channels
 and clear out any lingering xml sync for that transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#initialize(java.io.DataOutput)">initialize</A></B>(java.io.DataOutput&nbsp;out)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#isAtLeast(int, int)">isAtLeast</A></B>(int&nbsp;major,
          int&nbsp;minor)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method returns true if the disk file being loaded by this DBStore
 has a version number greater than major.minor.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#isAtRev(int, int)">isAtRev</A></B>(int&nbsp;major,
        int&nbsp;minor)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method returns true if the disk file being loaded by this DBStore
 has a version number equal to major.minor.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#isBetweenRevs(int, int, int, int)">isBetweenRevs</A></B>(int&nbsp;major1,
              int&nbsp;minor1,
              int&nbsp;major2,
              int&nbsp;minor2)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method returns true if the disk file being loaded by this
 DBStore has a version number between greater than or equal to
 major1.minor1 and less than major2.minor2.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#isClean()">isClean</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns true if the journal does not contain any transactions</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#isLessThan(int, int)">isLessThan</A></B>(int&nbsp;major,
           int&nbsp;minor)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method returns true if the disk file being loaded by this DBStore
 has a version number earlier than major.minor.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#load()">load</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The load() method reads in all transactions in the current
 DBStore Journal and makes the appropriate changes to the DBStore
 Object Bases.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#printObject(arlut.csd.ganymede.server.DBObject)">printObject</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server">DBObject</A>&nbsp;obj)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#readHeaders()">readHeaders</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used to read and check the first few fields of the journal
 as a sanity check on journal open/load.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#reset()">reset</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The reset() method is used to copy the journal file to a safe location and
 truncate it.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#setDebug(boolean)">setDebug</A></B>(boolean&nbsp;val)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#undoTransaction(arlut.csd.ganymede.server.DBJournalTransaction)">undoTransaction</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server">DBJournalTransaction</A>&nbsp;transRecord)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The undoTransaction() method is responsible for rolling back the
 most recent transaction written to the journal, in the event that
 writing to the sync channels or finalizing the transaction fails
 (due to a lack of disk space, presumably).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server">DBJournalTransaction</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBJournal.html#writeTransaction(arlut.csd.ganymede.server.DBEditSet)">writeTransaction</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The writeTransaction() method performs the work of persisting a
 transaction to the DBStore Journal.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="debug"><!-- --></A><H3>
debug</H3>
<PRE>
static boolean <B>debug</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="ts"><!-- --></A><H3>
ts</H3>
<PRE>
static final <A HREF="../../../../arlut/csd/Util/TranslationService.html" title="class in arlut.csd.Util">TranslationService</A> <B>ts</B></PRE>
<DL>
<DD><p>TranslationService object for handling string localization in
 the Ganymede server.</p>
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="id_string"><!-- --></A><H3>
id_string</H3>
<PRE>
static final java.lang.String <B>id_string</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#arlut.csd.ganymede.server.DBJournal.id_string">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="major_version"><!-- --></A><H3>
major_version</H3>
<PRE>
static final short <B>major_version</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#arlut.csd.ganymede.server.DBJournal.major_version">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="minor_version"><!-- --></A><H3>
minor_version</H3>
<PRE>
static final short <B>minor_version</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#arlut.csd.ganymede.server.DBJournal.minor_version">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="OPENTRANS"><!-- --></A><H3>
OPENTRANS</H3>
<PRE>
static final java.lang.String <B>OPENTRANS</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#arlut.csd.ganymede.server.DBJournal.OPENTRANS">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="CLOSETRANS"><!-- --></A><H3>
CLOSETRANS</H3>
<PRE>
static final java.lang.String <B>CLOSETRANS</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#arlut.csd.ganymede.server.DBJournal.CLOSETRANS">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="FINALIZE"><!-- --></A><H3>
FINALIZE</H3>
<PRE>
static final java.lang.String <B>FINALIZE</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#arlut.csd.ganymede.server.DBJournal.FINALIZE">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="CREATE"><!-- --></A><H3>
CREATE</H3>
<PRE>
static final byte <B>CREATE</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#arlut.csd.ganymede.server.DBJournal.CREATE">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="EDIT"><!-- --></A><H3>
EDIT</H3>
<PRE>
static final byte <B>EDIT</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#arlut.csd.ganymede.server.DBJournal.EDIT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="DELETE"><!-- --></A><H3>
DELETE</H3>
<PRE>
static final byte <B>DELETE</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#arlut.csd.ganymede.server.DBJournal.DELETE">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="filename"><!-- --></A><H3>
filename</H3>
<PRE>
java.lang.String <B>filename</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="jFile"><!-- --></A><H3>
jFile</H3>
<PRE>
java.io.RandomAccessFile <B>jFile</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="store"><!-- --></A><H3>
store</H3>
<PRE>
<A HREF="../../../../arlut/csd/ganymede/server/DBStore.html" title="class in arlut.csd.ganymede.server">DBStore</A> <B>store</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="dirty"><!-- --></A><H3>
dirty</H3>
<PRE>
boolean <B>dirty</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="file_major_version"><!-- --></A><H3>
file_major_version</H3>
<PRE>
short <B>file_major_version</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="file_minor_version"><!-- --></A><H3>
file_minor_version</H3>
<PRE>
short <B>file_minor_version</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="transactionsInJournal"><!-- --></A><H3>
transactionsInJournal</H3>
<PRE>
int <B>transactionsInJournal</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="incompleteTransaction"><!-- --></A><H3>
incompleteTransaction</H3>
<PRE>
private <A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server">DBJournalTransaction</A> <B>incompleteTransaction</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="DBJournal(arlut.csd.ganymede.server.DBStore, java.lang.String)"><!-- --></A><H3>
DBJournal</H3>
<PRE>
public <B>DBJournal</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBStore.html" title="class in arlut.csd.ganymede.server">DBStore</A>&nbsp;store,
                 java.lang.String&nbsp;filename)
          throws java.io.IOException</PRE>
<DL>
<DD><p>The DBJournal constructor takes a filename and creates a DBJournal object.
 If the file named does not exist, the DBJournal constructor will create
 the file and write the DBJournal header, leaving the file pointer pointing
 to the end of the file.  If the Journal file does exist, the constructor
 will advance the file pointer to the end of the file.</p>

 <p>In either case, the file will be made ready for new transactions to be
 written.</p>
<P>
<DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="setDebug(boolean)"><!-- --></A><H3>
setDebug</H3>
<PRE>
public static void <B>setDebug</B>(boolean&nbsp;val)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="initialize(java.io.DataOutput)"><!-- --></A><H3>
initialize</H3>
<PRE>
static void <B>initialize</B>(java.io.DataOutput&nbsp;out)
                throws java.io.IOException</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="isAtLeast(int, int)"><!-- --></A><H3>
isAtLeast</H3>
<PRE>
public boolean <B>isAtLeast</B>(int&nbsp;major,
                         int&nbsp;minor)</PRE>
<DL>
<DD><p>This method returns true if the disk file being loaded by this DBStore
 has a version number greater than major.minor.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isLessThan(int, int)"><!-- --></A><H3>
isLessThan</H3>
<PRE>
public boolean <B>isLessThan</B>(int&nbsp;major,
                          int&nbsp;minor)</PRE>
<DL>
<DD><p>This method returns true if the disk file being loaded by this DBStore
 has a version number earlier than major.minor.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isAtRev(int, int)"><!-- --></A><H3>
isAtRev</H3>
<PRE>
public boolean <B>isAtRev</B>(int&nbsp;major,
                       int&nbsp;minor)</PRE>
<DL>
<DD><p>This method returns true if the disk file being loaded by this DBStore
 has a version number equal to major.minor.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isBetweenRevs(int, int, int, int)"><!-- --></A><H3>
isBetweenRevs</H3>
<PRE>
public boolean <B>isBetweenRevs</B>(int&nbsp;major1,
                             int&nbsp;minor1,
                             int&nbsp;major2,
                             int&nbsp;minor2)</PRE>
<DL>
<DD><p>This method returns true if the disk file being loaded by this
 DBStore has a version number between greater than or equal to
 major1.minor1 and less than major2.minor2.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="reset()"><!-- --></A><H3>
reset</H3>
<PRE>
public void <B>reset</B>()
           throws java.io.IOException</PRE>
<DL>
<DD>The reset() method is used to copy the journal file to a safe location and
 truncate it.  reset() should be called immediately after the DBStore is
 dumped to disk and before the DumpLock is relinquished.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="load()"><!-- --></A><H3>
load</H3>
<PRE>
public boolean <B>load</B>()
             throws java.io.IOException</PRE>
<DL>
<DD><P>The load() method reads in all transactions in the current
 DBStore Journal and makes the appropriate changes to the DBStore
 Object Bases.  This method should be called after the main body
 of the DBStore is loaded and before the DBStore is put into
 production mode.</P>

 <P>load() will return true if the on-disk journal was in a
 consistent state, with no incomplete transactions.  If load()
 encounters EOF in the middle of attempting to read in a
 transaction record, load() will return false.  In either case,
 any valid and complete transaction records will be processed and
 integrated into the DBStore.</P>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="writeTransaction(arlut.csd.ganymede.server.DBEditSet)"><!-- --></A><H3>
writeTransaction</H3>
<PRE>
public <A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server">DBJournalTransaction</A> <B>writeTransaction</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)
                                      throws java.io.IOException</PRE>
<DL>
<DD><p>The writeTransaction() method performs the work of persisting a
 transaction to the DBStore Journal.  writeTransaction() should be
 called before the changes are actually finalized in the DBStore
 Object Bases.  If writeTransaction() is not able to successfully
 write the complete transaction log to the Journal file, an
 IOException will be thrown.</p>

 <p>Note that writeTransaction() does not mark the transaction in
 the on-disk journal file as finalized.  If the server is
 abnormally terminated (or if the disk fills) between the time that
 writeTransaction() is called and the time that
 finalizeTransaction() is called, the server on startup will not consider
 the transaction to have been finally put to rest, and the system will attempt
 to push the unfinalized change in the journal to the sync channels.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>On success, a <A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server"><CODE>DBJournalTransaction</CODE></A> recording the
 transaction's time stamp and integral transaction number is
 returned.  This DBJournalTransaction can be passed back to
 finalizeTransaction() when writes to the sync channels are
 completed.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="finalizeTransaction(arlut.csd.ganymede.server.DBJournalTransaction)"><!-- --></A><H3>
finalizeTransaction</H3>
<PRE>
public void <B>finalizeTransaction</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server">DBJournalTransaction</A>&nbsp;transRecord)
                         throws java.io.IOException</PRE>
<DL>
<DD>The finalizeTransaction() method actually performs the full work of
 writing out a transaction to the DBStore Journal.
 writeTransaction() should be called before the changes are
 actually finalized in the DBStore Object Bases.  If
 writeTransaction() is not able to successfully write the complete
 transaction log to the Journal file, an IOException will be
 thrown.  The Journal entries are structured so that if a Journal
 entry can't be completed, the transaction's whole entry will
 be ignored at load time.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="undoTransaction(arlut.csd.ganymede.server.DBJournalTransaction)"><!-- --></A><H3>
undoTransaction</H3>
<PRE>
public void <B>undoTransaction</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server">DBJournalTransaction</A>&nbsp;transRecord)
                     throws java.io.IOException</PRE>
<DL>
<DD><p>The undoTransaction() method is responsible for rolling back the
 most recent transaction written to the journal, in the event that
 writing to the sync channels or finalizing the transaction fails
 (due to a lack of disk space, presumably).</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getIncompleteTransaction()"><!-- --></A><H3>
getIncompleteTransaction</H3>
<PRE>
public <A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server">DBJournalTransaction</A> <B>getIncompleteTransaction</B>()</PRE>
<DL>
<DD><p>If the journal contained a persisted but not finalized
 transaction when we tried to load it, this method will return a
 DBJournalTransaction containing enough information that the
 Ganymede main() method can iterate over the defined sync channels
 and clear out any lingering xml sync for that transaction.</p>

 <p>This can only happen if the server is abnormally terminated in
 a very narrow window, but in the one case in 10,000 where an
 abnormal shutdown hit right in that window, we'll go ahead and
 worry about it.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="clearIncompleteTransaction()"><!-- --></A><H3>
clearIncompleteTransaction</H3>
<PRE>
public void <B>clearIncompleteTransaction</B>()</PRE>
<DL>
<DD><p>After the Ganymede main() method has tried to clean out any
 remaining bits of the non-finalized transaction, it will need
 to clear the incompleteTransaction record.  This method does
 that. </p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isClean()"><!-- --></A><H3>
isClean</H3>
<PRE>
public boolean <B>isClean</B>()</PRE>
<DL>
<DD>returns true if the journal does not contain any transactions
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="readHeaders()"><!-- --></A><H3>
readHeaders</H3>
<PRE>
void <B>readHeaders</B>()
           throws java.io.IOException</PRE>
<DL>
<DD><p>This method is used to read and check the first few fields of the journal
 as a sanity check on journal open/load.</p>

 <p>This method <b>MUST NOT</b> be called after the journal is open and active,
 or else the journal will become corrupted.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="printObject(arlut.csd.ganymede.server.DBObject)"><!-- --></A><H3>
printObject</H3>
<PRE>
private void <B>printObject</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server">DBObject</A>&nbsp;obj)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/DBJournal.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBField.html" title="class in arlut.csd.ganymede.server"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBJournalTransaction.html" title="class in arlut.csd.ganymede.server"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?arlut/csd/ganymede/server/DBJournal.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DBJournal.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
