<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_20) on Wed Sep 29 01:39:37 CDT 2010 -->
<TITLE>
DBLog
</TITLE>

<META NAME="date" CONTENT="2010-09-29">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DBLog";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/DBLog.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBLockSync.html" title="class in arlut.csd.ganymede.server"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?arlut/csd/ganymede/server/DBLog.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DBLog.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
arlut.csd.ganymede.server</FONT>
<BR>
Class DBLog</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>arlut.csd.ganymede.server.DBLog</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>DBLog</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
<p>This class manages recording events in the system log and generating
 reports from the system log based on specific criteria.  The DBLog class
 is responsible for logging events to an on-disk file, for emailing
 notification of events to users, admins, and other interested parties,
 and for scanning through a Ganymede log file for events pertaining to
 a designated object invid.</p>

 <p>Most of the methods in this class must be synchronized to keep
 the logfile orderly.</p>
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server">DBLog.MailMode</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enum used to specify whether the logging system should calculate
 additional addresses to send an event to.</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#closed">closed</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This variable tracks whether the log file has been closed, or whether
 it is open for append.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#debug">debug</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../arlut/csd/ganymede/server/GanymedeSession.html" title="class in arlut.csd.ganymede.server">GanymedeSession</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#gSession">gSession</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GanymedeSession reference to allow the log code to do searching
 of the database, etc.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBLogController.html" title="interface in arlut.csd.ganymede.server">DBLogController</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#logController">logController</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The log controller responsible for logging events to disk or to a
 database.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBLogController.html" title="interface in arlut.csd.ganymede.server">DBLogController</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#mailController">mailController</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The log controller responsible for logging 'mailout' events to
 disk or to a database.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../Qsmtp/Qsmtp.html" title="class in Qsmtp">Qsmtp</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#mailer">mailer</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Our mail relay.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.HashMap&lt;java.lang.String,java.util.HashMap&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#objectOuts">objectOuts</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This instance variable is used to track all mail messages that
 we accumulate during the course of logging events for a
 transaction between startTransactionLog() and
 endTransactionLog(), by mapping objevent tags to HashMaps which
 in turn map email addresses to the MailOut objects that we are
 accumulating.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.Map&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/objectEventType.html" title="class in arlut.csd.ganymede.server">objectEventType</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#objEventCodes">objEventCodes</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We keep a table of the system event codes to speed the logging process.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.Date</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#objEventCodesTimeStamp">objEventCodesTimeStamp</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This field keeps track of when we last updated the objEventCodes
 hash, so that we can check against the timestamp held in the
 Object Event DBObjectBase to see whether we need to refresh the
 objEventCodes hash.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#signature">signature</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The signature to be appended to any outgoing mail</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.Map&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/systemEventType.html" title="class in arlut.csd.ganymede.server">systemEventType</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#sysEventCodes">sysEventCodes</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We keep a table of the system event codes to speed the logging process.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.Date</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#sysEventCodesTimeStamp">sysEventCodesTimeStamp</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This field keeps track of when we last updated the sysEventCodes
 hash, so that we can check against the timestamp held in the
 System Event DBObjectBase to see whether we need to refresh the
 sysEventCodes hash.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#transactionComment">transactionComment</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This instance variable is used to track the comment for a
 transaction log across a sequence of startTransactionLog(),
 streamLogEvent(), and endTransactionLog() calls.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../arlut/csd/ganymede/server/systemEventType.html" title="class in arlut.csd.ganymede.server">systemEventType</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#transactionControl">transactionControl</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This instance variable is used to track the transaction
 logging instruction in the Ganymede server's System Event
 DBStore, so that we don't have to keep looking it up during
 transaction processing.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#transactionID">transactionID</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This instance variable is used to track the transaction identifier
 across a sequence of startTransactionLog(), streamLogEvent(), and endTransactionLog()
 calls.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.HashMap&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#transactionMailOuts">transactionMailOuts</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This instance variable is used to track all mail messages that we accumulate
 during the course of logging events for a transaction between startTransactionLog()
 and endTransactionLog(), by mapping email address to MailOut objects, which hold
 the mail that we are composing for users who need to know about a full transaction's
 worth of email.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.Date</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#transactionTimeStamp">transactionTimeStamp</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This instance variable is used to track the timestamp for a transaction
 log across a sequence of startTransactionLog(), streamLogEvent(), and endTransactionLog()
 calls.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;<A HREF="../../../../arlut/csd/Util/TranslationService.html" title="class in arlut.csd.Util">TranslationService</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#ts">ts</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TranslationService object for handling string localization in the
 Ganymede server.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#DBLog(arlut.csd.ganymede.server.DBLogController, arlut.csd.ganymede.server.DBLogController, arlut.csd.ganymede.server.GanymedeSession, boolean)">DBLog</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogController.html" title="interface in arlut.csd.ganymede.server">DBLogController</A>&nbsp;logController,
      <A HREF="../../../../arlut/csd/ganymede/server/DBLogController.html" title="interface in arlut.csd.ganymede.server">DBLogController</A>&nbsp;mailController,
      <A HREF="../../../../arlut/csd/ganymede/server/GanymedeSession.html" title="class in arlut.csd.ganymede.server">GanymedeSession</A>&nbsp;gSession,
      boolean&nbsp;suppressEmail)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructor for a Ganymede log object.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.List&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#appendMailOut(arlut.csd.ganymede.server.DBLogEvent, java.util.HashMap, arlut.csd.ganymede.server.DBSession, arlut.csd.ganymede.server.systemEventType)">appendMailOut</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
              java.util.HashMap&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&gt;&nbsp;map,
              <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;session,
              <A HREF="../../../../arlut/csd/ganymede/server/systemEventType.html" title="class in arlut.csd.ganymede.server">systemEventType</A>&nbsp;transactionType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method takes a DBLogEvent object, scans it to determine
 what mailing lists should be notified of the event in the
 context of a transaction, and adds a description of the
 passed in event to each <A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server"><CODE>MailOut</CODE></A>
 object held in map.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.List&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#appendObjectMail(arlut.csd.ganymede.server.DBLogEvent, java.util.HashMap, java.lang.String, arlut.csd.ganymede.server.DBSession)">appendObjectMail</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
                 java.util.HashMap&lt;java.lang.String,java.util.HashMap&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&gt;&gt;&nbsp;objectOuts,
                 java.lang.String&nbsp;transdescrip,
                 <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;transSession)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This creates and records a MailOut object for custom Object
 Event notifications if necessary for the DBLogEvent passed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#calculateMailTargets(arlut.csd.ganymede.server.DBLogEvent, arlut.csd.ganymede.server.DBSession, arlut.csd.ganymede.server.systemEventType, arlut.csd.ganymede.server.DBLog.MailMode)">calculateMailTargets</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
                     <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;session,
                     <A HREF="../../../../arlut/csd/ganymede/server/systemEventType.html" title="class in arlut.csd.ganymede.server">systemEventType</A>&nbsp;eventType,
                     <A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server">DBLog.MailMode</A>&nbsp;mode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method generates a list of additional email addresses that
 notification for this event should be sent to, based on the
 event's type and the ownership of objects referenced by this
 event.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Set&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#calculateOwnerAddresses(java.util.List, arlut.csd.ganymede.server.DBLog.MailMode)">calculateOwnerAddresses</A></B>(java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;objects,
                        <A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server">DBLog.MailMode</A>&nbsp;mode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method takes a List of <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common"><CODE>Invid</CODE></A>'s representing objects
 touched during a transaction, and returns a Set of email
 addresses that should be notified of operations affecting the
 objects in the &lt;objects&gt; list.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.Set&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#calculateOwnerAddresses(java.util.List, arlut.csd.ganymede.server.DBLog.MailMode, arlut.csd.ganymede.server.DBSession)">calculateOwnerAddresses</A></B>(java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;objects,
                        <A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server">DBLog.MailMode</A>&nbsp;mode,
                        <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;session)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method takes a List of <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common"><CODE>Invid</CODE></A>'s representing objects
 touched during a transaction, and returns a Set of email
 addresses that should be notified of operations affecting the
 objects in the &lt;objects&gt; list.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.Set&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#calculateOwnerAddresses(java.util.List, arlut.csd.ganymede.server.DBSession)">calculateOwnerAddresses</A></B>(java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;objects,
                        <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;session)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method takes a List of <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common"><CODE>Invid</CODE></A>'s representing objects
 touched during a transaction, and returns a Set of email
 addresses that should be notified of operations affecting the
 objects in the &lt;objects&gt; list.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#cleanupTransaction()">cleanupTransaction</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emergency cleanup function called by <CODE>arlut.csd.ganymede.server.DBEditSet#commit_logTransaction(java.util.HashMap)</CODE> in
 the event of a problem during logging.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method closes out the log file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#describeLargeTransaction(arlut.csd.ganymede.server.MailOut, arlut.csd.ganymede.server.DBEditSet)">describeLargeTransaction</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&nbsp;mailOut,
                         <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;describeLargeTransaction provides a subject line with the types
 and count of objects created, modified, or deleted by
 transaction, but without the names of the objects that
 describeSmallTransaction provides.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#describeSmallTransaction(arlut.csd.ganymede.server.MailOut, arlut.csd.ganymede.server.DBEditSet)">describeSmallTransaction</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&nbsp;mailOut,
                         <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;describeSmallTransaction provides a subject line with the types
 and names of the objects created, modified, or deleted by
 transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#describeTransaction(arlut.csd.ganymede.server.MailOut, arlut.csd.ganymede.server.DBEditSet)">describeTransaction</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&nbsp;mailOut,
                    <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Synthesize a descriptive subject for transaction summary email.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#endTransactionLog(java.util.List, java.lang.String, arlut.csd.ganymede.common.Invid, arlut.csd.ganymede.server.DBEditSet)">endTransactionLog</A></B>(java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;invids,
                  java.lang.String&nbsp;adminName,
                  <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&nbsp;admin,
                  <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method should only be called after a
 startTransactionLog() call and any corresponding
 endTransactionLog() calls, made by <CODE>arlut.csd.ganymede.server.DBEditSet#commit_logTransaction(java.util.HashMap)</CODE>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#loadSignature()">loadSignature</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method gets the signature file loaded.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#logSystemEvent(arlut.csd.ganymede.server.DBLogEvent)">logSystemEvent</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used to log an event such as server shutdown/restart,
 user log-in, persona change, etc.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#mailNotify(java.lang.String, java.lang.String, arlut.csd.ganymede.server.DBLogEvent, arlut.csd.ganymede.server.DBLog.MailMode, arlut.csd.ganymede.server.DBSession)">mailNotify</A></B>(java.lang.String&nbsp;title,
           java.lang.String&nbsp;description,
           <A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
           <A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server">DBLog.MailMode</A>&nbsp;mode,
           <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;session)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used to handle an email notification event, where
 the mail title should reflect detailed information about the
 event, and extra descriptive information is to be sent out.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.StringBuffer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#retrieveHistory(arlut.csd.ganymede.common.Invid, java.util.Date, java.util.Date, boolean, boolean, boolean)">retrieveHistory</A></B>(<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&nbsp;invid,
                java.util.Date&nbsp;sinceTime,
                java.util.Date&nbsp;beforeTime,
                boolean&nbsp;keyOnAdmin,
                boolean&nbsp;fullTransactions,
                boolean&nbsp;getLoginEvents)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used to scan the log for log events that match
 invid and that have occurred since sinceTime.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#sendMail(java.util.List, java.lang.String, java.lang.String)">sendMail</A></B>(java.util.List&lt;java.lang.String&gt;&nbsp;recipients,
         java.lang.String&nbsp;title,
         java.lang.String&nbsp;description)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method sends out a generic mail message that will not be logged.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#sendMail(java.util.List, java.lang.String, java.lang.String, arlut.csd.ganymede.server.DBLog.MailMode, java.util.List)">sendMail</A></B>(java.util.List&lt;java.lang.String&gt;&nbsp;recipients,
         java.lang.String&nbsp;title,
         java.lang.String&nbsp;description,
         <A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server">DBLog.MailMode</A>&nbsp;mode,
         java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;invids)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method sends out a generic mail message that will not be
 logged.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#sendObjectMail(java.lang.String, java.lang.String, java.util.HashMap, java.util.Date, arlut.csd.ganymede.server.DBEditSet)">sendObjectMail</A></B>(java.lang.String&nbsp;returnAddr,
               java.lang.String&nbsp;adminName,
               java.util.HashMap&lt;java.lang.String,java.util.HashMap&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&gt;&gt;&nbsp;objectOuts,
               java.util.Date&nbsp;currentTime,
               <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send out type-specific email notifications to email addresses
 that have signed up for per-object-type mail notifications.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.List&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#sendSysEventMail(arlut.csd.ganymede.server.DBLogEvent, java.lang.String)">sendSysEventMail</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
                 java.lang.String&nbsp;transdescrip)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This sends out system ("global") event mail to the appropriate
 users, based on the system event record's flags.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#startTransactionLog(java.util.List, java.lang.String, arlut.csd.ganymede.common.Invid, java.lang.String, arlut.csd.ganymede.server.DBEditSet)">startTransactionLog</A></B>(java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;invids,
                    java.lang.String&nbsp;adminName,
                    <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&nbsp;admin,
                    java.lang.String&nbsp;comment,
                    <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used to start logging events for a transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#streamEvent(arlut.csd.ganymede.server.DBLogEvent, arlut.csd.ganymede.server.DBEditSet)">streamEvent</A></B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
            <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method should only be called after a
 startTransactionLog() call and before the corresponding
 endTransactionLog() call, made by <CODE>arlut.csd.ganymede.server.DBEditSet#commit_logTransaction(java.util.HashMap)</CODE>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#updateObjEventCodeHash()">updateObjEventCodeHash</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Private helper method to (re)initialize our local hash of object
 event codes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/DBLog.html#updateSysEventCodeHash()">updateSysEventCodeHash</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Private helper method to (re)initialize our local hash of system
 event codes.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="debug"><!-- --></A><H3>
debug</H3>
<PRE>
static final boolean <B>debug</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#arlut.csd.ganymede.server.DBLog.debug">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="ts"><!-- --></A><H3>
ts</H3>
<PRE>
static final <A HREF="../../../../arlut/csd/Util/TranslationService.html" title="class in arlut.csd.Util">TranslationService</A> <B>ts</B></PRE>
<DL>
<DD>TranslationService object for handling string localization in the
 Ganymede server.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="logController"><!-- --></A><H3>
logController</H3>
<PRE>
private <A HREF="../../../../arlut/csd/ganymede/server/DBLogController.html" title="interface in arlut.csd.ganymede.server">DBLogController</A> <B>logController</B></PRE>
<DL>
<DD>The log controller responsible for logging events to disk or to a
 database.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="mailController"><!-- --></A><H3>
mailController</H3>
<PRE>
private <A HREF="../../../../arlut/csd/ganymede/server/DBLogController.html" title="interface in arlut.csd.ganymede.server">DBLogController</A> <B>mailController</B></PRE>
<DL>
<DD>The log controller responsible for logging 'mailout' events to
 disk or to a database.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="signature"><!-- --></A><H3>
signature</H3>
<PRE>
private java.lang.String <B>signature</B></PRE>
<DL>
<DD>The signature to be appended to any outgoing mail
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="closed"><!-- --></A><H3>
closed</H3>
<PRE>
private boolean <B>closed</B></PRE>
<DL>
<DD>This variable tracks whether the log file has been closed, or whether
 it is open for append.  If true, the log file may not be written to.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="sysEventCodes"><!-- --></A><H3>
sysEventCodes</H3>
<PRE>
private java.util.Map&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/systemEventType.html" title="class in arlut.csd.ganymede.server">systemEventType</A>&gt; <B>sysEventCodes</B></PRE>
<DL>
<DD>We keep a table of the system event codes to speed the logging process.
 This hash maps system event classTokens to instances of systemEventType.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../arlut/csd/ganymede/server/systemEventType.html" title="class in arlut.csd.ganymede.server"><CODE>systemEventType</CODE></A></DL>
</DL>
<HR>

<A NAME="sysEventCodesTimeStamp"><!-- --></A><H3>
sysEventCodesTimeStamp</H3>
<PRE>
private java.util.Date <B>sysEventCodesTimeStamp</B></PRE>
<DL>
<DD>This field keeps track of when we last updated the sysEventCodes
 hash, so that we can check against the timestamp held in the
 System Event DBObjectBase to see whether we need to refresh the
 sysEventCodes hash.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="objEventCodes"><!-- --></A><H3>
objEventCodes</H3>
<PRE>
private java.util.Map&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/objectEventType.html" title="class in arlut.csd.ganymede.server">objectEventType</A>&gt; <B>objEventCodes</B></PRE>
<DL>
<DD>We keep a table of the system event codes to speed the logging process.
 This hash maps object event classTokens to instances of objectEventType.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../arlut/csd/ganymede/server/objectEventType.html" title="class in arlut.csd.ganymede.server"><CODE>objectEventType</CODE></A></DL>
</DL>
<HR>

<A NAME="objEventCodesTimeStamp"><!-- --></A><H3>
objEventCodesTimeStamp</H3>
<PRE>
private java.util.Date <B>objEventCodesTimeStamp</B></PRE>
<DL>
<DD>This field keeps track of when we last updated the objEventCodes
 hash, so that we can check against the timestamp held in the
 Object Event DBObjectBase to see whether we need to refresh the
 objEventCodes hash.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="mailer"><!-- --></A><H3>
mailer</H3>
<PRE>
private <A HREF="../../../../Qsmtp/Qsmtp.html" title="class in Qsmtp">Qsmtp</A> <B>mailer</B></PRE>
<DL>
<DD>Our mail relay.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="gSession"><!-- --></A><H3>
gSession</H3>
<PRE>
private <A HREF="../../../../arlut/csd/ganymede/server/GanymedeSession.html" title="class in arlut.csd.ganymede.server">GanymedeSession</A> <B>gSession</B></PRE>
<DL>
<DD>GanymedeSession reference to allow the log code to do searching
 of the database, etc.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="transactionID"><!-- --></A><H3>
transactionID</H3>
<PRE>
private java.lang.String <B>transactionID</B></PRE>
<DL>
<DD><p>This instance variable is used to track the transaction identifier
 across a sequence of startTransactionLog(), streamLogEvent(), and endTransactionLog()
 calls.</p>
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="transactionTimeStamp"><!-- --></A><H3>
transactionTimeStamp</H3>
<PRE>
private java.util.Date <B>transactionTimeStamp</B></PRE>
<DL>
<DD><p>This instance variable is used to track the timestamp for a transaction
 log across a sequence of startTransactionLog(), streamLogEvent(), and endTransactionLog()
 calls.</p>
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="transactionComment"><!-- --></A><H3>
transactionComment</H3>
<PRE>
private java.lang.String <B>transactionComment</B></PRE>
<DL>
<DD><p>This instance variable is used to track the comment for a
 transaction log across a sequence of startTransactionLog(),
 streamLogEvent(), and endTransactionLog() calls.</p>
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="transactionMailOuts"><!-- --></A><H3>
transactionMailOuts</H3>
<PRE>
private java.util.HashMap&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&gt; <B>transactionMailOuts</B></PRE>
<DL>
<DD><p>This instance variable is used to track all mail messages that we accumulate
 during the course of logging events for a transaction between startTransactionLog()
 and endTransactionLog(), by mapping email address to MailOut objects, which hold
 the mail that we are composing for users who need to know about a full transaction's
 worth of email.</p>
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="objectOuts"><!-- --></A><H3>
objectOuts</H3>
<PRE>
private java.util.HashMap&lt;java.lang.String,java.util.HashMap&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&gt;&gt; <B>objectOuts</B></PRE>
<DL>
<DD><p>This instance variable is used to track all mail messages that
 we accumulate during the course of logging events for a
 transaction between startTransactionLog() and
 endTransactionLog(), by mapping objevent tags to HashMaps which
 in turn map email addresses to the MailOut objects that we are
 accumulating.</p>

 <p>Note that this only works because we serialize log commit.</p>
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="transactionControl"><!-- --></A><H3>
transactionControl</H3>
<PRE>
private <A HREF="../../../../arlut/csd/ganymede/server/systemEventType.html" title="class in arlut.csd.ganymede.server">systemEventType</A> <B>transactionControl</B></PRE>
<DL>
<DD><p>This instance variable is used to track the transaction
 logging instruction in the Ganymede server's System Event
 DBStore, so that we don't have to keep looking it up during
 transaction processing.</p>
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="DBLog(arlut.csd.ganymede.server.DBLogController, arlut.csd.ganymede.server.DBLogController, arlut.csd.ganymede.server.GanymedeSession, boolean)"><!-- --></A><H3>
DBLog</H3>
<PRE>
public <B>DBLog</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogController.html" title="interface in arlut.csd.ganymede.server">DBLogController</A>&nbsp;logController,
             <A HREF="../../../../arlut/csd/ganymede/server/DBLogController.html" title="interface in arlut.csd.ganymede.server">DBLogController</A>&nbsp;mailController,
             <A HREF="../../../../arlut/csd/ganymede/server/GanymedeSession.html" title="class in arlut.csd.ganymede.server">GanymedeSession</A>&nbsp;gSession,
             boolean&nbsp;suppressEmail)
      throws java.io.IOException</PRE>
<DL>
<DD><p>Constructor for a Ganymede log object.</p>
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>logController</CODE> - <DD><CODE>mailController</CODE> - <DD><CODE>gSession</CODE> - GanymedeSession reference used to allow DBLog code to do queries
 on the Ganymede database<DD><CODE>suppressEmail</CODE> - A boolean that indicates whether we should switch off the sending of
 emails
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
void <B>close</B>()
     throws java.io.IOException</PRE>
<DL>
<DD>This method closes out the log file.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="sendMail(java.util.List, java.lang.String, java.lang.String)"><!-- --></A><H3>
sendMail</H3>
<PRE>
public void <B>sendMail</B>(java.util.List&lt;java.lang.String&gt;&nbsp;recipients,
                     java.lang.String&nbsp;title,
                     java.lang.String&nbsp;description)</PRE>
<DL>
<DD>This method sends out a generic mail message that will not be logged.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recipients</CODE> - a List of email addresses to send this
 message to.  Should never be null or empty.<DD><CODE>title</CODE> - The email subject for this message, will have the
 Ganymede.subjectPrefixProperty prepended to it.<DD><CODE>description</CODE> - The message itself</DL>
</DD>
</DL>
<HR>

<A NAME="sendMail(java.util.List, java.lang.String, java.lang.String, arlut.csd.ganymede.server.DBLog.MailMode, java.util.List)"><!-- --></A><H3>
sendMail</H3>
<PRE>
public void <B>sendMail</B>(java.util.List&lt;java.lang.String&gt;&nbsp;recipients,
                     java.lang.String&nbsp;title,
                     java.lang.String&nbsp;description,
                     <A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server">DBLog.MailMode</A>&nbsp;mode,
                     java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;invids)</PRE>
<DL>
<DD><p>This method sends out a generic mail message that will not be
 logged.  According to the mode enum value, mail may be sent to
 email addresses associated with the objects in the invids List,
 in addition to the recipients list.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recipients</CODE> - a List of email addresses to send this message
 to.  May legally be null or empty, in which case mail will be sent
 to anyone needed according to the mode parameter.<DD><CODE>title</CODE> - The email subject for this message, will have the
 Ganymede.subjectPrefixProperty prepended to it.<DD><CODE>description</CODE> - The message itself<DD><CODE>mode</CODE> - Enum value controlling whether and how to send email
 to parties connected to the objects referenced by the contents of
 invids.<DD><CODE>invids</CODE> - A List of Invids to consult for possible mail targeting</DL>
</DD>
</DL>
<HR>

<A NAME="mailNotify(java.lang.String, java.lang.String, arlut.csd.ganymede.server.DBLogEvent, arlut.csd.ganymede.server.DBLog.MailMode, arlut.csd.ganymede.server.DBSession)"><!-- --></A><H3>
mailNotify</H3>
<PRE>
public void <B>mailNotify</B>(java.lang.String&nbsp;title,
                       java.lang.String&nbsp;description,
                       <A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
                       <A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server">DBLog.MailMode</A>&nbsp;mode,
                       <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;session)</PRE>
<DL>
<DD><P>This method is used to handle an email notification event, where
 the mail title should reflect detailed information about the
 event, and extra descriptive information is to be sent out.</P>

 <P>mailNotify() will send the message to the owners of any objects
 referenced by event if mode so specifies.</P>

 <P>description and/or title may be null, in which case the proper
 strings will be extracted from the event's database record</P>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>title</CODE> - The email subject for this message, will have the
 Ganymede.subjectPrefixProperty prepended to it.<DD><CODE>description</CODE> - The message itself<DD><CODE>event</CODE> - A single event to be logged, with its own timestamp.<DD><CODE>mode</CODE> - Enum value controlling whether and how to send email
 to parties connected to the objects referenced by this transaction.<DD><CODE>session</CODE> - The DBSession used to reference this transaction.</DL>
</DD>
</DL>
<HR>

<A NAME="logSystemEvent(arlut.csd.ganymede.server.DBLogEvent)"><!-- --></A><H3>
logSystemEvent</H3>
<PRE>
public void <B>logSystemEvent</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event)</PRE>
<DL>
<DD><P>This method is used to log an event such as server shutdown/restart,
 user log-in, persona change, etc.  Basically any thing not associated
 with a transaction.</P>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>event</CODE> - A single event to be logged, with its own timestamp.</DL>
</DD>
</DL>
<HR>

<A NAME="startTransactionLog(java.util.List, java.lang.String, arlut.csd.ganymede.common.Invid, java.lang.String, arlut.csd.ganymede.server.DBEditSet)"><!-- --></A><H3>
startTransactionLog</H3>
<PRE>
public void <B>startTransactionLog</B>(java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;invids,
                                java.lang.String&nbsp;adminName,
                                <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&nbsp;admin,
                                java.lang.String&nbsp;comment,
                                <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</PRE>
<DL>
<DD><P>This method is used to start logging events for a transaction.  It is called from
 <CODE>arlut.csd.ganymede.server.DBEditSet#commit_logTransaction(java.util.HashMap)</CODE>,
 which is responsible for sequencing this call with calls to streamLogEvent() and
 endTransactionLog().</P>

 <p>DBEditSet.commit_logTransaction() is responsible for
 synchronizing on Ganymede.log, and thereby excluding all other
 synchronized log calls from being initiated during a
 transaction's commit.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>invids</CODE> - a List of Invid objects modified by this transaction<DD><CODE>adminName</CODE> - Human readable string identifying the admin responsible for this transaction<DD><CODE>admin</CODE> - Invid representing the user or admin responsible for this transaction<DD><CODE>comment</CODE> - If not null, a comment to attach to logging and email generated in response to this transaction.<DD><CODE>transaction</CODE> - The <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server"><CODE>DBEditSet</CODE></A> representing the transaction to be logged</DL>
</DD>
</DL>
<HR>

<A NAME="streamEvent(arlut.csd.ganymede.server.DBLogEvent, arlut.csd.ganymede.server.DBEditSet)"><!-- --></A><H3>
streamEvent</H3>
<PRE>
public void <B>streamEvent</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
                        <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</PRE>
<DL>
<DD><p>This method should only be called after a
 startTransactionLog() call and before the corresponding
 endTransactionLog() call, made by <CODE>arlut.csd.ganymede.server.DBEditSet#commit_logTransaction(java.util.HashMap)</CODE>.</p>

 <p>DBEditSet.commit_logTransaction() is responsible for
 synchronizing on Ganymede.log, and thereby excluding all other
 synchronized log calls from being initiated during a
 transaction's commit.</p>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="endTransactionLog(java.util.List, java.lang.String, arlut.csd.ganymede.common.Invid, arlut.csd.ganymede.server.DBEditSet)"><!-- --></A><H3>
endTransactionLog</H3>
<PRE>
public void <B>endTransactionLog</B>(java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;invids,
                              java.lang.String&nbsp;adminName,
                              <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&nbsp;admin,
                              <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</PRE>
<DL>
<DD><p>This method should only be called after a
 startTransactionLog() call and any corresponding
 endTransactionLog() calls, made by <CODE>arlut.csd.ganymede.server.DBEditSet#commit_logTransaction(java.util.HashMap)</CODE>.</p>

 <p>DBEditSet.commit_logTransaction() is responsible for
 synchronizing on Ganymede.log, and thereby excluding all other
 synchronized log calls from being initiated during a
 transaction's commit, when calling this function</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>invids</CODE> - a List of Invid objects modified by this transaction<DD><CODE>adminName</CODE> - Human readable string identifying the admin responsible for this transaction<DD><CODE>admin</CODE> - Invid representing the user or admin responsible for this transaction<DD><CODE>transaction</CODE> - The <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server"><CODE>DBEditSet</CODE></A> representing the transaction to be logged</DL>
</DD>
</DL>
<HR>

<A NAME="cleanupTransaction()"><!-- --></A><H3>
cleanupTransaction</H3>
<PRE>
public void <B>cleanupTransaction</B>()</PRE>
<DL>
<DD><p>Emergency cleanup function called by <CODE>arlut.csd.ganymede.server.DBEditSet#commit_logTransaction(java.util.HashMap)</CODE> in
 the event of a problem during logging.</p>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="retrieveHistory(arlut.csd.ganymede.common.Invid, java.util.Date, java.util.Date, boolean, boolean, boolean)"><!-- --></A><H3>
retrieveHistory</H3>
<PRE>
public java.lang.StringBuffer <B>retrieveHistory</B>(<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&nbsp;invid,
                                              java.util.Date&nbsp;sinceTime,
                                              java.util.Date&nbsp;beforeTime,
                                              boolean&nbsp;keyOnAdmin,
                                              boolean&nbsp;fullTransactions,
                                              boolean&nbsp;getLoginEvents)</PRE>
<DL>
<DD><P>This method is used to scan the log for log events that match
 invid and that have occurred since sinceTime.</P>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>invid</CODE> - If not null, retrieveHistory() will only return events involving
 this object invid.<DD><CODE>sinceTime</CODE> - if not null, retrieveHistory() will only return events
 occuring on or after the time specified in this Date object.<DD><CODE>beforeTime</CODE> - if not null, retrieveHistory() will only return
 events occurring on or before the time specified in this Date
 object.<DD><CODE>keyOnAdmin</CODE> - if true, rather than returning a string containing events
 that involved &lt;invid&gt;, retrieveHistory() will return a string containing events
 performed on behalf of the administrator with invid &lt;invid&gt;.<DD><CODE>fullTransactions</CODE> - if true, the buffer returned will include all events in any
 transactions that involve the given invid.  if false, only those events in a transaction
 directly affecting the given invid will be returned.<DD><CODE>getLoginEvents</CODE> - if true, this method will return only login
 and logout events.  if false, this method will return no login
 and logout events.
<DT><B>Returns:</B><DD>A human-readable multiline string containing a list of history events</DL>
</DD>
</DL>
<HR>

<A NAME="sendSysEventMail(arlut.csd.ganymede.server.DBLogEvent, java.lang.String)"><!-- --></A><H3>
sendSysEventMail</H3>
<PRE>
private java.util.List&lt;java.lang.String&gt; <B>sendSysEventMail</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
                                                          java.lang.String&nbsp;transdescrip)</PRE>
<DL>
<DD><P>This sends out system ("global") event mail to the appropriate
 users, based on the system event record's flags.</P>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>List of email addresses this event was sent to for
 system event notification</DL>
</DD>
</DL>
<HR>

<A NAME="appendObjectMail(arlut.csd.ganymede.server.DBLogEvent, java.util.HashMap, java.lang.String, arlut.csd.ganymede.server.DBSession)"><!-- --></A><H3>
appendObjectMail</H3>
<PRE>
private java.util.List&lt;java.lang.String&gt; <B>appendObjectMail</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
                                                          java.util.HashMap&lt;java.lang.String,java.util.HashMap&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&gt;&gt;&nbsp;objectOuts,
                                                          java.lang.String&nbsp;transdescrip,
                                                          <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;transSession)</PRE>
<DL>
<DD><p>This creates and records a MailOut object for custom Object
 Event notifications if necessary for the DBLogEvent passed.  The
 MailOut object created, if any, will cause mail to be sent to any
 email addresses signed up for Object Event notification in the
 Ganymede database.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>List of email addresses this event will be sent to for
 object event notification.</DL>
</DD>
</DL>
<HR>

<A NAME="sendObjectMail(java.lang.String, java.lang.String, java.util.HashMap, java.util.Date, arlut.csd.ganymede.server.DBEditSet)"><!-- --></A><H3>
sendObjectMail</H3>
<PRE>
private void <B>sendObjectMail</B>(java.lang.String&nbsp;returnAddr,
                            java.lang.String&nbsp;adminName,
                            java.util.HashMap&lt;java.lang.String,java.util.HashMap&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&gt;&gt;&nbsp;objectOuts,
                            java.util.Date&nbsp;currentTime,
                            <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</PRE>
<DL>
<DD>Send out type-specific email notifications to email addresses
 that have signed up for per-object-type mail notifications.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="updateSysEventCodeHash()"><!-- --></A><H3>
updateSysEventCodeHash</H3>
<PRE>
private void <B>updateSysEventCodeHash</B>()</PRE>
<DL>
<DD><P>Private helper method to (re)initialize our local hash of system
 event codes.</P>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="updateObjEventCodeHash()"><!-- --></A><H3>
updateObjEventCodeHash</H3>
<PRE>
private void <B>updateObjEventCodeHash</B>()</PRE>
<DL>
<DD><P>Private helper method to (re)initialize our local hash of object
 event codes.</P>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="calculateMailTargets(arlut.csd.ganymede.server.DBLogEvent, arlut.csd.ganymede.server.DBSession, arlut.csd.ganymede.server.systemEventType, arlut.csd.ganymede.server.DBLog.MailMode)"><!-- --></A><H3>
calculateMailTargets</H3>
<PRE>
private void <B>calculateMailTargets</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
                                  <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;session,
                                  <A HREF="../../../../arlut/csd/ganymede/server/systemEventType.html" title="class in arlut.csd.ganymede.server">systemEventType</A>&nbsp;eventType,
                                  <A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server">DBLog.MailMode</A>&nbsp;mode)</PRE>
<DL>
<DD><P>This method generates a list of additional email addresses that
 notification for this event should be sent to, based on the
 event's type and the ownership of objects referenced by this
 event.</P>

 <P>Note that the email addresses added to this event's mail list
 will be in addition to any that were previously specified by the
 code that originally generated the log event.</P>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="appendMailOut(arlut.csd.ganymede.server.DBLogEvent, java.util.HashMap, arlut.csd.ganymede.server.DBSession, arlut.csd.ganymede.server.systemEventType)"><!-- --></A><H3>
appendMailOut</H3>
<PRE>
private java.util.List&lt;java.lang.String&gt; <B>appendMailOut</B>(<A HREF="../../../../arlut/csd/ganymede/server/DBLogEvent.html" title="class in arlut.csd.ganymede.server">DBLogEvent</A>&nbsp;event,
                                                       java.util.HashMap&lt;java.lang.String,<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&gt;&nbsp;map,
                                                       <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;session,
                                                       <A HREF="../../../../arlut/csd/ganymede/server/systemEventType.html" title="class in arlut.csd.ganymede.server">systemEventType</A>&nbsp;transactionType)</PRE>
<DL>
<DD><P>This method takes a DBLogEvent object, scans it to determine
 what mailing lists should be notified of the event in the
 context of a transaction, and adds a description of the
 passed in event to each <A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server"><CODE>MailOut</CODE></A>
 object held in map.</P>

 <P>That is, the map passed in maps each discrete recipient
 list to a running MailOut object which has the complete
 text that will be mailed to that recipient when the
 transaction's records are mailed out.</P>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>List of email addresses this event was sent to for
 system event notification</DL>
</DD>
</DL>
<HR>

<A NAME="loadSignature()"><!-- --></A><H3>
loadSignature</H3>
<PRE>
private void <B>loadSignature</B>()
                    throws java.io.IOException</PRE>
<DL>
<DD>This method gets the signature file loaded.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="calculateOwnerAddresses(java.util.List, arlut.csd.ganymede.server.DBLog.MailMode)"><!-- --></A><H3>
calculateOwnerAddresses</H3>
<PRE>
public java.util.Set&lt;java.lang.String&gt; <B>calculateOwnerAddresses</B>(java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;objects,
                                                               <A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server">DBLog.MailMode</A>&nbsp;mode)</PRE>
<DL>
<DD><P>This method takes a List of <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common"><CODE>Invid</CODE></A>'s representing objects
 touched during a transaction, and returns a Set of email
 addresses that should be notified of operations affecting the
 objects in the &lt;objects&gt; list.</P>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="calculateOwnerAddresses(java.util.List, arlut.csd.ganymede.server.DBSession)"><!-- --></A><H3>
calculateOwnerAddresses</H3>
<PRE>
public static java.util.Set&lt;java.lang.String&gt; <B>calculateOwnerAddresses</B>(java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;objects,
                                                                      <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;session)</PRE>
<DL>
<DD><P>This method takes a List of <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common"><CODE>Invid</CODE></A>'s representing objects
 touched during a transaction, and returns a Set of email
 addresses that should be notified of operations affecting the
 objects in the &lt;objects&gt; list.</P>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="calculateOwnerAddresses(java.util.List, arlut.csd.ganymede.server.DBLog.MailMode, arlut.csd.ganymede.server.DBSession)"><!-- --></A><H3>
calculateOwnerAddresses</H3>
<PRE>
public static java.util.Set&lt;java.lang.String&gt; <B>calculateOwnerAddresses</B>(java.util.List&lt;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&gt;&nbsp;objects,
                                                                      <A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server">DBLog.MailMode</A>&nbsp;mode,
                                                                      <A HREF="../../../../arlut/csd/ganymede/server/DBSession.html" title="class in arlut.csd.ganymede.server">DBSession</A>&nbsp;session)</PRE>
<DL>
<DD><P>This method takes a List of <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common"><CODE>Invid</CODE></A>'s representing objects
 touched during a transaction, and returns a Set of email
 addresses that should be notified of operations affecting the
 objects in the &lt;objects&gt; list.</P>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="describeTransaction(arlut.csd.ganymede.server.MailOut, arlut.csd.ganymede.server.DBEditSet)"><!-- --></A><H3>
describeTransaction</H3>
<PRE>
private static java.lang.String <B>describeTransaction</B>(<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&nbsp;mailOut,
                                                    <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</PRE>
<DL>
<DD>Synthesize a descriptive subject for transaction summary email.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="describeSmallTransaction(arlut.csd.ganymede.server.MailOut, arlut.csd.ganymede.server.DBEditSet)"><!-- --></A><H3>
describeSmallTransaction</H3>
<PRE>
private static java.lang.String <B>describeSmallTransaction</B>(<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&nbsp;mailOut,
                                                         <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</PRE>
<DL>
<DD>describeSmallTransaction provides a subject line with the types
 and names of the objects created, modified, or deleted by
 transaction.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="describeLargeTransaction(arlut.csd.ganymede.server.MailOut, arlut.csd.ganymede.server.DBEditSet)"><!-- --></A><H3>
describeLargeTransaction</H3>
<PRE>
private static java.lang.String <B>describeLargeTransaction</B>(<A HREF="../../../../arlut/csd/ganymede/server/MailOut.html" title="class in arlut.csd.ganymede.server">MailOut</A>&nbsp;mailOut,
                                                         <A HREF="../../../../arlut/csd/ganymede/server/DBEditSet.html" title="class in arlut.csd.ganymede.server">DBEditSet</A>&nbsp;transaction)</PRE>
<DL>
<DD>describeLargeTransaction provides a subject line with the types
 and count of objects created, modified, or deleted by
 transaction, but without the names of the objects that
 describeSmallTransaction provides.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/DBLog.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBLockSync.html" title="class in arlut.csd.ganymede.server"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBLog.MailMode.html" title="enum in arlut.csd.ganymede.server"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?arlut/csd/ganymede/server/DBLog.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DBLog.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
