<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Ganymede UNIX Installation Guide Release 1.0 prerelease 1, beta 4 - 10 October 2000</title>
  </head>

  <body BGCOLOR="#FFFFFF">

<IMG SRC="gifs/ganymede_title.gif" HEIGHT=200 WIDTH=560 alt = "Ganymede">
<h1><FONT FACE="Arial, Helvetica">Ganymede UNIX Installation Guide Release 1.0 prerelease 1, beta 4 - 10 October 2000</FONT></h1>
<hr>

<p>Installing Ganymede breaks down into five steps:</p>
    <ol>
      <li>Configuring the distribution for your site</li>
      <li>Installing server files</li>
      <li>Installing UNIX client files</li>
      <li>Prepare web access clients</li>
      <li>Configuring the server</li>
      <li>Loading the server</li>
    </ol>

<p>Each of these topics is discussed in its own section below.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr BGCOLOR="#CCFFCC">
	<td colspan="1"><h2><b>1. Configuring the distribution for your site</b></h2></td>
      </tr>
    </table> 

    <p>When you first unpack the Ganymede UNIX distribution, you will see that there is
    a <a href="glossary.html#configure">configure</a> script under the ganymede-xx directory.
    This script
    does two main things.  First, it unpacks four scripts you can
    immediately use to install the client and server, called
    <a href="glossary.html#installClient">installClient</a>,
    <a href="glossary.html#installWeb">installWeb</a> and 
    <a href="glossary.html#installServer">installServer</a>.
    Second, <a href="glossary.html#configure">configure</a> goes
    through the source tree and builds and configures the makefiles
    and build scripts used to build the source.</p>

    <p>Run <a href="glossary.html#configure">configure</a> to get these install
    scripts built and to get the source tree configured for building.</p>

    <p>See README.source for information on building the source tree.  Note that
    as downloaded, everything is already compiled, and bundled into the jar
    files in the jars directory.  You should only need to worry about recompiling
    things if you make changes.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr BGCOLOR="#CCFFCC">
	<td colspan="1"><h2><b>2. Installing server files</b></h2></td>
      </tr>
    </table> 

    <p>The server files should be in a location that is not accessible
    to the average user.  On UNIX, you'll probably want to be running
    the Ganymede server as <font color="#ff0000"><code><b>root</b></code></font> so that Ganymede can properly build
    NIS maps and DNS tables.  There is nothing intrinsic to the
    Ganymede server that requires root privileges, but the build scripts
    that you install to propagate network information may need to be
    installed as root.</p>

    <p>The Ganymede server consists primarily of:</p>

    <ul>
      <li>a jar file that contains the Ganymede server code (
      <a href="glossary.html#ganymedeServer.jar">ganymedeServer.jar</a>)</li>
      <li>a jar file that contains custom plug-in code,
      <a href="glossary.html#custom.jar">custom.jar</a></li>
      <li>a <a href="glossary.html#server.properties">ganymede.properties</a> 
      file that sets configuration parameters</li>
      <li>a <a href="glossary.html#ganymede.db">ganymede.db</a> file</li>
      <li>a script, <a href="glossary.html#runServer">runServer</a>, that 
      invokes java on <font color="#ff0000"><code><b>arlut.csd.ganymede.Ganymede</b></code></font> 
      to run the server</li>
      <li>a script, <a href="glossary.html#stopServer">stopServer</a>, that can
      be used to cleanly shut the server down.</li>
    </ul>

    <p>While running, the server will also produce:</p>

    <ul>
      <li>a running <a href="glossary.html#journal">journal</a> file
      that records all transactions made by the server so that the
      server can fully recover if it ever crashes or if the system
      running it goes down</li>

      <li>a comprehensive log file, <a href="glossary.html#log">log</a></li>

      <li>NIS and/or DNS source files, depending on the schema
      configuration &lt;optional&gt;</li>

      <li>a schematic listing of the database definition &lt;optional&gt;</li>
    </ul>

    <p>Of these, <a href="glossary.html#ganymede.db">ganymede.db</a>,
    <a href="glossary.html#server.properties">ganymede.properties</a>,
    <a href="glossary.html#journal">journal</a>, <a
    href="glossary.html#log">log</a>, and the NIS and DNS source files
    are sensitive. The <a
    href="glossary.html#ganymede.db">ganymede.db</a> file is not
    difficult to analyze, and passwords may be stored in plaintext
    therein, depending on your database configuration.  As shipped
    with the current release, the five sample database configurations
    do not store plaintext passwords.  The <a
    href="glossary.html#server.properties">ganymede.properties</a>
    file must be protected, as it has the the root (supergash)
    password chosen at install time in plaintext.  If desired, the <a
    href="glossary.html#server.properties">ganymede.properties</a>
    file can be edited to remove the ganymede.defaultrootpass
    entry.</p>
    
    <p>With those notes out of the way, run <a
    href="glossary.html#installServer">installServer</a> to install
    the server.  <a
    href="glossary.html#installServer">installServer</a> will ask you
    a number of questions, including the following:</p>

    <ul>
      <li>Where are the jdk binaries located?</li>
      <li>Where should the server's directory be installed?</li>
      <li>What is the name of the system that the server will run on?</li>
      <li>What port should the RMI registry supporting Ganymede run on?</li>
      <li>What mailhost should Ganymede use to send out diagnostic mail?</li>
      <li>What email address should Ganymede sign on email that it sends out?</li>
      <li>What name do you want the Ganymede superuser account to have?</li>
      <li>What password do you want the superuser account to have?</li>
      <li>What name do you want the Ganymede monitor account to have?</li>
      <li>What password do you want the monitor account to have?</li>
      <li>What schema do you want to initialize the database with? (gash,nisonly,bsd,linux,gasharl)</li>
    </ul>

    <p>Depending on the schema chosen, if any, additional questions
    may be asked.</p>

    <p>When you have answered all questions, <a
    href="glossary.html#installServer">installServer</a> will
    customize and install the server and all its files
    specified server directory.  A file named <a
    href="glossary.html#README.custom">README.custom</a> will be
    created in the server directory with detailed instructions on how
    to load data into the Ganymede system using the schema you have
    chosen, if any.</p>

    <p>At the present time, the following schema kits are available
    as options when you run <a href="glossary.html#installServer">installServer</a>:</p>

    <dl>
      <dt>gash</dt>
      <dd>
      <p>A complex schema based on the <a
      href="http://www.arlut.utexas.edu/csd/gash_docs/gash.html">GASH</a>
      system, the gash schema is designed to work with data files from
      GASH, to manage ARL-formatted sources files for the NIS
      <code>passwd</code>, <code>group</code>, <code>netgroup</code>,
      <code>aliases</code>, <code>auto.vol</code>, and
      <code>auto.home.*</code> maps, as well as the ARL-custom
      <code>hosts_info</code> system information database, used for
      DNS management.</p>

      <p>The gash schema kit has not been maintained recently, in
      favor of the gasharl schema kit, which is more customized for
      ARL's use.  Proper use of the gash schema kit requires a set
      of custom scripts that take the GASH datafiles and propagate
      them into NIS and DNS.  These files are included in the Ganymede
      distribution, but they are not documented or supported.  We
      are working on some new integration scripts that will be much
      better documented and included with the Ganymede distribution by
      time of 1.0.</p>
      </dd>

      <dt>nisonly</dd>
      <dd><p>A simple schema to manage UNIX passwd and group files, using
      Solaris-formatted gecos fields in the passwd file.</p></dd>

      <dt>bsd</dt>
      <dd><p>A simple schema for managing users and groups under BSD 4.4
      derived operating systems, with support for the BSD <code>master.passwd</code>
      file.  Includes a builder script that you can use to allow Ganymede
      to actively manage your <code>/etc/master.passwd</code> and <code>/etc/group</code>
      files.</p></dd>

      <dt>linux</dt>
      <dd><p>A simple schema for managing users and groups under
      Linux.  Includes a builder script that you can use to allow
      Ganymede to actively manage your <code>/etc/passwd</code> and
      <code>/etc/group</code> files.</p></dd>

      <dt>gasharl</dt>
      <dd><p>Like the gash schema, this schema is designed to manage a complex
      NIS/DNS environment using files defined in the <a
      href="http://www.arlut.utexas.edu/csd/gash_docs/gash.html">GASH</a> system.</p>

      <p>Unlike the gash schema, this schema has been under recent
      active development and maintenance, and has some ARL-specific
      features that will not be of much use even to other GASH users,
      including code for the ARL contract database.</p>

      <p>This schema kit does have a lot of good custom code that
      might be of interest to people looking to create their own
      schema kits, including a number of wizard examples.</p></dd>

      <dt>ganymede.only</dt>
      <dd><p>An experimental schema done some time ago, ganymede.only separates
      personal information from the user accounts, and does not include
      any useful builder scripts.</p>

      <p>The ganymede.only schema has not been touched for many months.</p>
    </dl>

    <p>Whichever kind of schema you choose, the <a
    href="glossary.html#installServer">installServer</a> script will
    configure the server to run with a <a
    href="glossary.html#ganymede.db">ganymede.db</a> and <a
    href="glossary.html#custom.jar">custom.jar</a> file built for the
    chosen schema.</p>

    <p>If you don't choose any schema, <a
    href="glossary.html#installServer">installServer</a> will install
    the Ganymede server without any <a
    href="glossary.html#ganymede.db">ganymede.db</a> file.  The first
    time you run the server, a new <a
    href="glossary.html#ganymede.db">ganymede.db</a> will be created
    with nothing defined except the basic object and field types
    needed by the server for basic operations.  This may be a useful
    option if you want to create a new schema from scratch.</p>
      
    <p>After you have run <a
    href="glossary.html#installServer">installServer</a>, <a
    href="glossary.html#installClient">installClient</a>, and/or
    <a href="glossary.html#installWeb">installWeb</a> (below), you
    can immediately run the server and connect with the client, but
    the database will be empty.  You will need to see section 5) below
    to get data bulk-loaded into Ganymede.</p>
    
    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr BGCOLOR="#CCFFCC">
	<td colspan="1"><h2><b>3. Installing UNIX client files</b></h2></td>
      </tr>
    </table> 
    
    <p>There are two primary clients for Ganymede.  We will call these the
    end-user client and the admin console.  Both can be run from a UNIX
    command line with a shell script that will run java on them, or from
    a web browser with support for the full 1.1 JDK standard.  There is
    nothing to stop you from running either client on a Win32 box, but
    you will have to develop .bat files to run the code on your own.  The
    clients are themselves totally portable, however, as they are simply
    Java jar files.</p>
    
    <p>We have provided an install script for installing the Ganymede
    clients on a UNIX system.  <a
    href="glossary.html#installClient">installClient</a> will prompt you for the name
    of the machine that will be running your Ganymede server, and the
    directory which will contain the bin, html, and jars
    directories. The install script will then customize and install
    scripts for you so that the end-user client and admin console can
    easily be run.  Of course, that the server has to be up and
    running to run either the main client or the console.</p>

    <p>Don't try to install the client and server into the same
    directory.. the two are meant to be installed separately, in separate
    directories. This is important because the server files need to
    be kept out of the reach of non-privileged users, while the client
    files are intended to be available for anyone to run.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr BGCOLOR="#CCFFCC">
	<td colspan="1"><h2><b>4. Prepare web access clients</b></h2></td>
      </tr>
    </table> 
    
    <p>The <a href="glossary.html#installWeb">installWeb</a> script is
    used to install the files necessary for serving on a web
    server to support client access to Ganymede from a web browser
    with a modern Java runtime.  
    <a href="glossary.html#installWeb">installWeb</a> installs a bunch of
    files into a designated directory, including an index.html file,
    the <a href="glossary.html#ganymede.jar">ganymede.jar</a> and <a
    href="glossary.html#ganymedeAdmin.jar">ganymedeAdmin.jar</a>, and
    a bunch of individual html files linked to the index.html file,
    all customized for your Ganymede server's location.</p>

    <p>Java applets run in a security "sandbox", which keeps
    downloaded code from being able to cause mischief on your machine.
    One of the restrictions of the Java sandbox is that unsigned
    downloaded applets are only allowed to open networking connections
    to the same machine that the applet was downloaded from.  Because
    of this, you will have to install a web server on the same machine
    as your Ganymede server, and your users will have to point their
    browser at a URL on that system which will resolve to the
    directory that contains the files installed by the <a
    href="glossary.html#installWeb">installWeb</a> script.</p>

    <p>Once you have a web server running on the same machine as your
    Ganymede server and you have used installWeb to generate the web
    directory for your clients, you will need to be sure that the
    machines that will run the client over the web are configured
    properly.  The installed web files include versions of the
    Ganymede client pages designed for use with the Java plug-in on
    Windows (version 1.3.0 or better is really best.. see <a
    href="http://java.sun.com/j2se/1.2/jre/">java.sun.com/j2se/1.2/jre/</a>
    to download the Java plug-in), as well as a version of the client
    pages designed for use with a browser with built-in RMI and Swing
    support.  The 'native' option is intended for users of web browsers
    that have built-in support for Sun's latest JVM plug-ins.  This includes
    the Netscape browser under OS/2, the Internet Explorer browser on
    Macintosh, and the Mozilla/Netscape 6 browser on Macintosh, Windows,
    Linux, and Solaris.</p>

    <p>On the Macintosh with Internet Explorer, you need to install
    the very latest version of Apple's <a
    href="http://www.apple.com/java/">Macintosh Runtime for Java</a>.
    Current version of the MRJ for traditional MacOS are based on Java
    1.1, and do not include the Swing class libraries required by the
    Ganymede clients.  In order to make Ganymede work on such systems,
    you will need to extract the swingall.jar file from Sun's JDK and
    install it on your Macintosh in a directory of your choosing.
    Internet Explorer has a preferences option to add additional class
    paths to your browser's Java environment.  Find and add the
    swingall.jar file to your Internet Explorer Java class list and
    you should be ready to go, using the native mode client.</p>

    <p>Windows users using Netscape 4.x or any version of Internet
    Explorer, will need to use the plug-in mode client.  If your users
    do not install the Java plug-in before trying to run the Plug-In
    clients, their web browser will help them download the Plug-In as
    needed.  Once the Java Plug-In is downloaded, the user will need
    to quit out of the browser and run the Plug-In control panel.
    Configure the Plug-In so that the network and class access is
    unrestricted and unsigned applets are allowed.  Apply the
    preference changes, and restart the browser.  The Ganymede Plug-In
    clients should work properly now.</p>

    <p><b>IMPORTANT NOTE</b>: whenever you run applets using the Java
    Plug-In, the applets can only run as long as the log-in applet is
    still displayed in the web browser.  If you close the main browser
    window or click to a different page (either by following a link or
    by clicking back on the browser), the applet will be shut down.
    Both the Ganymede client and admin console have been written so
    that this shut-down is handled in an orderly fashion, but the
    shut-down is unavoidable, so be sure not to disturb the applet
    frame while you are using the client or console.</p>
    
    <p>In addition to the Ganymede client and admin console, <a
    href="glossary.html#installWeb">installWeb</a> will also install a
    simple password-change utility/applet.  This program hasn't been
    maintained in a while, and may not be working properly
    currently.</p>
    
    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr BGCOLOR="#CCFFCC">
	<td colspan="1"><h2><b>5. Configuring the server</b></h2></td>
      </tr>
    </table> 

    <p>The server may be configured in two ways.  The first is by using the
    admin console to edit the server's schema and the second is by
    authoring and/or modifying plug-in classes.</p>

    <p>The server schema is specified in the <a
    href="glossary.html#ganymede.db">ganymede.db</a> file, and
    includes definitions of the object types to be stored in the
    database, their fields, and any plug-in classes that are to manage
    particular object types.  We will occasionally talk about a
    'schema file'.  A schema file is simply a <a
    href="glossary.html#ganymede.db">ganymede.db</a> file that just
    contains the data definition specification, but no custom objects.
    Each of the sample schemas included with Ganymede include a <a
    href="glossary.html#ganymede.schema">ganymede.schema</a> file that
    you can use in your evaluation of Ganymede.</p>
  
    <p>The plug-in classes themselves are typically packaged in a file
    named <a href="glossary.html#custom.jar">custom.jar</a>.  As with
    the <a href="glossary.html#ganymede.schema">ganymede.schema</a>
    files, both the gash and nisonly schema directories contain a <a
    href="glossary.html#custom.jar">custom.jar</a> file.</p>
  
    <p>Ganymede schema/db files and custom class sets (<a
    href="glossary.html#custom.jar">custom.jar</a>) need to be matched
    together.  Whenever you run the server, you will want to specify
    both a <a href="glossary.html#ganymede.db">ganymede.db</a> file
    and a <a href="glossary.html#custom.jar">custom.jar</a> file.  You
    can run the Ganymede server with no <a
    href="glossary.html#ganymede.db">ganymede.db</a> or <a
    href="glossary.html#custom.jar">custom.jar</a> files, and the
    Ganymede server will initialize a simple <a
    href="glossary.html#ganymede.db">ganymede.db</a> file for you.</p>

    <p>If you chose one of the sample schemas when you ran <a
    href="glossary.html#installServer">installServer</a>, you should
    have a <a href="glossary.html#ganymede.db">ganymede.db</a> and a
    <a href="glossary.html#custom.jar">custom.jar</a> file in place.
    You should be able to start the server and have it come up with
    the object types and custom code from whichever of the schemas you
    chose.  If you did not choose a schema, but rather just hit return
    when prompted, the Ganymede server will create you a bare-bones <a
    href="glossary.html#ganymede.db">ganymede.db</a> file when you run
    the server for the first time.  See src/schemas/README for a
    description of the various schema kits.</p>

    <p>In order to edit the server's schema, start the Ganymede server
    on your server machine.  The server will load its database, come
    up, and tell you that it is ready to operate.  You can now run the
    adminConsole from your client install.  Log in using the root name
    and password you specified when you ran <a
    href="glossary.html#installServer">installServer</a>.  After a
    moment, you'll see the admin console come up.  Go to the control
    menu and select 'Edit Schema'.  After a bit, you'll see the schema
    editor come up.  You can add, remove, or modify object
    definitions.  Each object definition has a 'Classname' field.  You
    can enter the name of a class in this field, and the next time
    that the Ganymede server is restarted, Ganymede will load that
    class and use it to manage the object type that you associated it
    with.</p>

    <p>When you have made all the changes to the schema that you want,
    hit OK and the Ganymede server will integrate the changes you
    made.  You should then use the Admin console to tell the server to
    dump the database.  If you are going to be loading the database
    from scratch using the database definition you just created, you
    should also tell the admin console to have the server dump the
    schema.  This will cause the server to emit a schema file (empty
    db file) according to the <a
    href="glossary.html#server.properties">ganymede.properties</a>
    file that the server was started with.  You can then take this
    schema file and copy it for use with the loader code, as discussed
    in section 5.</p>

    <p>The sample schemas each specify a builder task to
    be run when a transaction is committed.</p>

    <dl>

      <dt>gasharl</dt>
      <dd>arlut.csd.ganymede.custom.GASHBuilderTask</dd>
      
      <dt>linux</dt>
      <dd>arlut.csd.ganymede.custom.LinuxBuilderTask</dd>

      <dt>bsd</dt>
      <dd>arlut.csd.ganymede.custom.BSDBuilderTask</dd>

      <dt>nisonly</dt>
      <dd>arlut.csd.ganymede.custom.NISBuilderTask</dd>

      <dt>gash</dt>
      <dd>arlut.csd.ganymede.custom.GASHBuilderTask</dd>

      <dt>ganymede.only</dt>
      <dd>arlut.csd.ganymede.custom.DNSBuilderTask and
      arlut.csd.ganymede.custom.NISBuilderTask</dd>

      </dl>

    <p>In addition, each schema by default will look for a script
    to run in the &lt;installdir&gt;/db directory.  If you like, you
    can edit the server's properties file to change
    ganymede.builder.scriptlocation, which specifies where the
    build scripts are to be found.</p>

    <dl>

      <dt>gasharl</dt> <dd>gashbuilder</dd>
      <dt>bsd</dt> <dd>bsd_builder</dd>
      <dt>linux</dt> <dd>linux_builder</dd>
      <dt>nisonly</dt> <dd>nisbuilder</dd>
      <dt>gash</dt> <dd>gashbuilder</dd>
      <dt>ganymede.only</dt> <dd>nisbuilder,dnsbuilder (not maintained currently)</dd>

    </dl>

    <p>These scripts should be executable by the user under which the
    Ganymede server is run.  The appropriate script will be run
    after the corresponding builder task has emitted fresh copies
    of the data files to &lt;installdir&gt;/db/out.  The scripts are intended
    to do an NIS/DNS push, or to copy passwd and group files to /etc,
    depending on the schema, and how you wish to use them.</p>

    <p>No matter which schema you choose, the class file for the builder
    task is bundled as part of the schema's <a href="glossary.html#custom.jar">custom.jar</a> file, and you can
    view and alter the source code in schema/custom_src.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr BGCOLOR="#CCFFCC">
	<td colspan="1"><h2><b>6. Loading the server</b></h2></td>
      </tr>
    </table> 

    <p>When you run the <a
    href="glossary.html#installServer">installServer</a> script, you
    are prompted for which sample schema you want to use.  Whichever
    you choose is copied to your server install directory under '<font
    color="#ff0000"><code><b>schema</b></code></font>', and a file
    providing customized and detailed instructions is placed in the
    <a href="glossary.html#README.custom">README.custom</a> file
    in the server install directory.</p>

    <p>The <font color="#ff0000"><code><b>schema</b></code></font>
    directory contains the sample schema file as discussed above, a
    <font color="#ff0000"><code><b>custom_src</b></code></font>
    directory with the source code for the custom plug-ins to go with
    the object definitions in the <a
    href="glossary.html#ganymede.schema">ganymede.schema</a> file, and
    a <font color="#ff0000"><code><b>loader</b></code></font>
    directory.</p>

    <p>The <font color="#ff0000"><code><b>loader</b></code></font>
    directory contains the following:</p>

    <ul>
      <li>a <a href="glossary.html#server.properties">ganymede.properties</a> file that you will want to customize
      <LI>an <font color="#ff0000"><code><b>input</b></code></font> directory
      <li>a <font color="#ff0000"><code><b>db</b></code></font> directory
      <li>a <a href="glossary.html#runDirectLoader">runDirectLoader</a> script
    </ul>

    <p>In order to load the Ganymede server, copy your input files to
    the <font color="#ff0000"><code><b>input</b></code></font>
    directory, and run the <a
    href="glossary.html#runDirectLoader">runDirectLoader</a> script.
    This will produce a <font
    color="#ff0000"><code><b>loader.db</b></code></font> file in the
    <font color="#ff0000"><code><b>schema/loader/db</b></code></font>
    directory.  You can then copy this file to <a
    href="glossary.html#ganymede.db">db/ganymede.db</a>, remove any <a
    href="glossary.html#journal">journal</a> file in <font
    color="#ff0000"><code><b>db</b></code></font>, and start the
    server.  The server will load the new database, and you will then
    be able to log in as supergash and take a look at your
    database.</p>

    <p>With the Ganymede 1.0 pre-release series, there is now a new <a
    href="glossary.html#xmlclient">xmlclient</a> client, which can be
    used instead of the old-style <a
    href="glossary.html#runDirectLoader">runDirectLoader</a> script to
    load data into the Ganymede server.  <a
    href="glossary.html#xmlclient">xmlclient</a> is a completely
    generic data loader, and you can write Perl scripts to load your
    data into Ganymede, according to whatever schema definition you
    are using.  See <a href="xml.html">xml.html</a> for details.  At
    the present time, the Ganymede schema kits have not been adapted
    to use the <a href="glossary.html#xmlclient">xmlclient</a> script
    for data loading.  This is one of the primary remaining goals for
    Ganymede 1.0 development.</p>

    <p>Take a look at the README file in the schema directory for details
    on how the schema you installed works.</p>

    <hr>
    <address><a href="mailto:broccol@csdsun1.arlut.utexas.edu">Jonathan Abbey</a></address>
    <!-- Created: Thu May 27 16:58:48 CDT 1999 -->
    <!-- hhmts start -->
Last modified: Mon Oct  9 23:54:54 CDT 2000
<!-- hhmts end -->
  </body>
</html>
