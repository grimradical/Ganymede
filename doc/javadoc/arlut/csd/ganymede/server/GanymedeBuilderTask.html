<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_21) on Wed Oct 06 17:39:41 CDT 2010 -->
<TITLE>
GanymedeBuilderTask
</TITLE>

<META NAME="date" CONTENT="2010-10-06">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="GanymedeBuilderTask";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/GanymedeBuilderTask.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/GanymedeAdmin.html" title="class in arlut.csd.ganymede.server"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/GanymedeExpirationTask.html" title="class in arlut.csd.ganymede.server"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?arlut/csd/ganymede/server/GanymedeBuilderTask.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="GanymedeBuilderTask.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
arlut.csd.ganymede.server</FONT>
<BR>
Class GanymedeBuilderTask</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>arlut.csd.ganymede.server.GanymedeBuilderTask</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>java.lang.Runnable</DD>
</DL>
<HR>
<DL>
<DT><PRE>public abstract class <B>GanymedeBuilderTask</B><DT>extends java.lang.Object<DT>implements java.lang.Runnable</DL>
</PRE>

<P>
<p>This class is designed to be subclassed in order to handle
 full-state synchronization from the Ganymede server to external
 directory service targets.</p>

 <p>GanymedeBuilderTask is really only intended to support directory
 service targets that are 'dump and replace' in nature, like NIS and
 classical DNS.  The reason for this is that GanymedeBuilderTasks
 are executed asynchronously with respect to transaction commits.
 By the time a GanymedeBuilderTask subclass runs, the Ganymede
 server has forgotten all previous states of the data in the server.
 All the GanymedeBuilderTask can do is check to see what kinds of
 objects (Users, Groups, Systems, etc.) have changed since the last
 time it was run.  It can also check to see which fields have been
 changed, within those object types.  It cannot check to see whether
 a particular field in a specific object has changed, however.
 Since there's no way for a GanymedeBuilderTask to do a
 before-and-after comparison, all it can reliably do is to write out
 absolutely everything relevant to its synchronization channel, and
 then hand off the build to an external process.  If you want to do
 a more granular, before-and-after incremental build, you can
 instead choose to use the more synchronous <A HREF="../../../../arlut/csd/ganymede/server/SyncRunner.html" title="class in arlut.csd.ganymede.server"><CODE>SyncRunner</CODE></A> class, which uses a standard
 XML format to represent changes to external synchronization
 processes.</p>

 <p>Subclasses of GanymedeBuilderTask need to implement the <A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#builderPhase1()"><CODE>builderPhase1()</CODE></A> and
 <A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#builderPhase2()"><CODE>builderPhase2()</CODE></A>
 methods.  builderPhase1() is run while a <A HREF="../../../../arlut/csd/ganymede/server/DBDumpLock.html" title="class in arlut.csd.ganymede.server"><CODE>DBDumpLock</CODE></A> is asserted on the server's
 <A HREF="../../../../arlut/csd/ganymede/server/DBStore.html" title="class in arlut.csd.ganymede.server"><CODE>DBStore</CODE></A>, guaranteeing a
 transaction-consistent database state that can be examined.
 builderPhase1() should do whatever is required to examine the
 database and to determine whether this builder task needs to carry
 out a build.  If so, builderPhase1() should write out the data
 files that will be needed for builderPhase2() and return true.
 When builderPhase1() completes, the dump lock is released.  If
 builderPhase1() returns true, the builderPhase2() method is then
 run.  This method is intended to run external scripts (typically
 written in Perl or Python) that process the files written out by
 the builderPhase1() method.</p>

 <p>All subclasses of GanymedeBuilderTask need to be registered in
 the Ganymede database via the Task object type.
 GanymedeBuilderTasks registered to be run on database commit will
 automatically be issued by the <A HREF="../../../../arlut/csd/ganymede/server/GanymedeScheduler.html" title="class in arlut.csd.ganymede.server"><CODE>GanymedeScheduler</CODE></A> when
 transactions commit.  The GanymedeScheduler is designed to run only
 a single instance of a task at a time, waiting to issue any new
 execution of the task until the previous execution completes.  A
 GanymedeBuilderTask doesn't finish executing until its
 builderPhase2() method returns.  This protects your builderPhase2()
 method from having its input data being overwritten by the next
 builderPhase1() method writing out new data.  It also sets a
 minimum build-to-build latency, according to how long your
 builderPhase1() and builderPhase2() methods take to complete.  No
 matter how long builderPhase2() takes, the GanymedeScheduler will
 run the builds as fast as it can, back-to-back.</p>

 <p>Your builderPhase1() method, however, should execute and
 complete as fast as possible.  The dump lock protecting
 builderPhase1() prevents any transactions from committing while a
 builderPhase1() method is executing.  Any significant delay in
 transaction commits may cause noticeable delays for your users.
 Fortunately, since builderPhase1() implementations just scan the
 Ganymede in-memory database and write out some text files, this
 usually doesn't take very long.  If you find that your
 builderPhase1() method is taking too long, you may want to consider
 splitting your build into multiple builder tasks.  The
 GanymedeBuilderTask is designed so that the server can execute
 multiple distinct builder tasks concurrently.  Splitting your build
 into multiple pieces that can be run concurrently can also improve
 your build latency by reducing the amount of work that a given
 external process has to do when called by builderPhase2().</p>

 <p>GanymedeBuilderTask includes a set of helper methods that
 subclasses can take advantage of in order to facilitate their
 operation.</p>

 <ul>
 <li>The <A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#baseChanged(short)"><CODE>baseChanged(short)</CODE></A>
 method can be used from <A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#builderPhase1()"><CODE>builderPhase1()</CODE></A> to
 check to see whether objects of a given type have been changed
 since the builder task was last run.</li>

 <li>The <A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#getOptionValue(java.lang.String)"><CODE>getOptionValue(java.lang.String)</CODE></A>
 method makes it possible for a builder task to retrieve
 configuration information from the task object in the Ganymede
 database which links the task into the server's scheduling.</li>

 <li>The <A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#openOutFile(java.lang.String, java.lang.String)"><CODE>openOutFile(java.lang.String,
 java.lang.String)</CODE></A> method not only opens files for writing, it also
 takes care to manage the archiving of old versions of the emitted
 file.  The <code>ganymede.builder.backups</code> property controls
 this behavior.  It should be set to a path for keeping zipped
 copies of previous builder outputs if you want this archiving
 feature to be in effect.  If it is, whenever files are opened by a
 builder task using openOutFile(), previous copies of those files
 will be moved to the directory set in
 <code>ganymede.builder.backups</code>.  The first time after
 midnight that openOutFile() is called by a builder task, all of the
 files written out the previous day by the builder task will be
 collected into a single zip file.  This can be handy, but you may
 not actually want to have certain files archived.  In that case,
 you should have your external sync script take care to remove such
 files after processing them..</li>

 <li>The <A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#enumerateObjects(short)"><CODE>enumerateObjects(short)</CODE></A>
 method can be used by builderPhase1() to get an Enumeration of
 objects of a given type to examine for writing.</li>
</ul>

 <p>In addition, the GanymedeBuilderTask base class logic is
 responsible for interfacing with the rest of the Ganymede server to
 display each builder task's status, both in the admin console and
 in the client.  The little conveyor belt icon in the lower left
 corner of the Ganymede graphical client is controlled by the action
 of the GanymedeBuilderTask and SyncRunner objects being run after a
 transaction commit.</p>
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Jonathan Abbey jonabbey@arlut.utexas.edu</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.util.Hashtable</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#backupsBusy">backupsBusy</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This hashtable maps directory paths to an Integer
 counting the number of tasks that are currently
 copying backup files to it.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#basePath">basePath</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#currentBackUpDirectory">currentBackUpDirectory</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#debug">debug</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#firstRun">firstRun</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#forceAllBases">forceAllBases</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If this flag is true, baseChanged() will always return true,
 as a way of forcing consideration of all databases that might
 be examined by GanymedeBuilderTask subclasses.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../arlut/csd/ganymede/common/scheduleHandle.html" title="class in arlut.csd.ganymede.common">scheduleHandle</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#handle">handle</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A scheduleHandle that we can use to update the admin consoles as
 to our build status.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#id">id</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.Date</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#lastRunTime">lastRunTime</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBDumpLock.html" title="class in arlut.csd.ganymede.server">DBDumpLock</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#lock">lock</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#oldBackUpDirectory">oldBackUpDirectory</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.Date</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#oldLastRunTime">oldLastRunTime</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;java.util.Vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#optionsCache">optionsCache</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#phase1Count">phase1Count</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Count of the number of builder tasks currently
 running in phase 1.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#phase2Count">phase2Count</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Count of the number of builder tasks currently
 running in phase 1.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#rolloverTime">rolloverTime</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#rollunderTime">rollunderTime</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#runOnCommit">runOnCommit</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Will be true if this builder task should be scheduled when a
 transaction is committed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;<A HREF="../../../../arlut/csd/ganymede/server/GanymedeSession.html" title="class in arlut.csd.ganymede.server">GanymedeSession</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#session">session</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#taskDefObjInvid">taskDefObjInvid</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Must be protected so subclasses in a different package can
 set this.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;<A HREF="../../../../arlut/csd/Util/TranslationService.html" title="class in arlut.csd.Util">TranslationService</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#ts">ts</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TranslationService object for handling string localization in
 the Ganymede server.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#GanymedeBuilderTask()">GanymedeBuilderTask</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#baseChanged(int)">baseChanged</A></B>(int&nbsp;baseid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used by subclasses of GanymedeBuilderTask to
 determine whether a particular base has had any modifications
 made to it since the last time this builder task was run.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#baseChanged(int, java.util.List)">baseChanged</A></B>(int&nbsp;baseid,
            java.util.List&nbsp;fieldIds)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used by subclasses of GanymedeBuilderTask to
 determine whether a particular field of a particular base has had
 any modifications made to it since the last time this builder
 task was run.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#baseChanged(short)">baseChanged</A></B>(short&nbsp;baseid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used by subclasses of GanymedeBuilderTask to
 determine whether a particular base has had any modifications
 made to it since the last time this builder task was run.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#baseChanged(short, java.util.List)">baseChanged</A></B>(short&nbsp;baseid,
            java.util.List&nbsp;fieldIds)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used by subclasses of GanymedeBuilderTask to
 determine whether a particular field of a particular base has had
 any modifications made to it since the last time this builder
 task was run.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>abstract &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#builderPhase1()">builderPhase1</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is intended to be overridden by subclasses of
 GanymedeBuilderTask.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>abstract &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#builderPhase2()">builderPhase2</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is intended to be overridden by subclasses of
 GanymedeBuilderTask.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#busyCount(java.lang.String)">busyCount</A></B>(java.lang.String&nbsp;path)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#cleanBackupDirectory()">cleanBackupDirectory</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This static method is run before the first time a builder task
 writes any file on server start-up.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#decBusy(java.lang.String)">decBusy</A></B>(java.lang.String&nbsp;path)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#decPhase1(boolean)">decPhase1</A></B>(boolean&nbsp;update)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#decPhase2(boolean)">decPhase2</A></B>(boolean&nbsp;update)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.Enumeration</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#enumerateObjects(int)">enumerateObjects</A></B>(int&nbsp;baseid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used by subclasses of GanymedeBuilderTask to
 obtain a list of DBObject references of the requested
 type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.Enumeration</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#enumerateObjects(short)">enumerateObjects</A></B>(short&nbsp;baseid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used by subclasses of GanymedeBuilderTask to
 obtain a list of DBObject references of the requested
 type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#findLabeledObject(java.lang.String, short)">findLabeledObject</A></B>(java.lang.String&nbsp;label,
                  short&nbsp;type)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Finds an invid by title.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#getLabel(arlut.csd.ganymede.common.Invid)">getLabel</A></B>(<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&nbsp;invid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used by subclasses of GanymedeBuilderTask to
 obtain the label for an object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server">DBObject</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#getObject(arlut.csd.ganymede.common.Invid)">getObject</A></B>(<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&nbsp;invid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used by subclasses of GanymedeBuilderTask to
 obtain a reference to a <A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server"><CODE>DBObject</CODE></A>
 matching a given invid.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.Iterable&lt;<A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server">DBObject</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#getObjects(int)">getObjects</A></B>(int&nbsp;baseid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used by subclasses of GanymedeBuilderTask to
 obtain a list of DBObject references of the requested
 type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.Iterable&lt;<A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server">DBObject</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#getObjects(short)">getObjects</A></B>(short&nbsp;baseid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used by subclasses of GanymedeBuilderTask to
 obtain a list of DBObject references of the requested
 type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;java.util.Vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#getOptionStrings()">getOptionStrings</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method returns the Vector of option strings registered
 for this task object in the Ganymede database, or null if no
 option strings are defined.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#getOptionValue(java.lang.String)">getOptionValue</A></B>(java.lang.String&nbsp;option)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method retrieves the value associated with the provided
 option name if this builder task was registered with taskDefObjInvid
 set by a subclass whose constructor takes an Invid parameter and which
 sets taskDefObjInvid in GanymedeBuilderTask.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#getPhase1Count()">getPhase1Count</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is public for GanymedeSession.openTransaction(), as a
 hack to support proper updating of the client's status icon on
 client connect.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#getPhase2Count()">getPhase2Count</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is public for GanymedeSession.openTransaction(), as a
 hack to support proper updating of the client's status icon on
 client connect.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#incBusy(java.lang.String)">incBusy</A></B>(java.lang.String&nbsp;path)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#incPhase1(boolean)">incPhase1</A></B>(boolean&nbsp;update)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#incPhase2(boolean)">incPhase2</A></B>(boolean&nbsp;update)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#isOptionSet(java.lang.String)">isOptionSet</A></B>(java.lang.String&nbsp;option)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method looks in the optionStrings field in the task
 object associated with this task and determines whether the given
 option name is present in the field.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#openBackupDirectory(java.lang.String)">openBackupDirectory</A></B>(java.lang.String&nbsp;filename)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called before the server's builder
 tasks are run and creates a backup directory for
 files to be copied to.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.io.PrintWriter</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#openOutFile(java.lang.String)">openOutFile</A></B>(java.lang.String&nbsp;filename)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method opens the specified file for writing out a text stream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.io.PrintWriter</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#openOutFile(java.lang.String, java.lang.String)">openOutFile</A></B>(java.lang.String&nbsp;filename,
            java.lang.String&nbsp;taskName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method opens the specified file for writing out a text stream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#run()">run</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is the main entry point for the GanymedeBuilderTask.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#run(java.lang.Object[])">run</A></B>(java.lang.Object[]&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is the main entry point for the GanymedeBuilderTask.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#runOnCommit(boolean)">runOnCommit</A></B>(boolean&nbsp;state)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Call this method to control whether or not this builder task
 should be run when the Ganymede server commits a transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#runsOnCommit()">runsOnCommit</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if this builder task should be scheduled when a
 transaction commits.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#setScheduleHandle(arlut.csd.ganymede.common.scheduleHandle)">setScheduleHandle</A></B>(<A HREF="../../../../arlut/csd/ganymede/common/scheduleHandle.html" title="class in arlut.csd.ganymede.common">scheduleHandle</A>&nbsp;handle)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method used by the Ganymede scheduler to pass us a handle that we
 can use to signal the admin console as to our success or failure.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#updateBuildStatus()">updateBuildStatus</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called by the GanymedeBuilderTask base class to
 record that the server is processing a build.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="debug"><!-- --></A><H3>
debug</H3>
<PRE>
private static final boolean <B>debug</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#arlut.csd.ganymede.server.GanymedeBuilderTask.debug">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="ts"><!-- --></A><H3>
ts</H3>
<PRE>
static final <A HREF="../../../../arlut/csd/Util/TranslationService.html" title="class in arlut.csd.Util">TranslationService</A> <B>ts</B></PRE>
<DL>
<DD>TranslationService object for handling string localization in
 the Ganymede server.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="currentBackUpDirectory"><!-- --></A><H3>
currentBackUpDirectory</H3>
<PRE>
private static java.lang.String <B>currentBackUpDirectory</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="oldBackUpDirectory"><!-- --></A><H3>
oldBackUpDirectory</H3>
<PRE>
private static java.lang.String <B>oldBackUpDirectory</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="backupsBusy"><!-- --></A><H3>
backupsBusy</H3>
<PRE>
private static java.util.Hashtable <B>backupsBusy</B></PRE>
<DL>
<DD>This hashtable maps directory paths to an Integer
 counting the number of tasks that are currently
 copying backup files to it.  If the current day's
 directory path changes and this count goes to
 zero, the old directory will be zipped up and
 deleted.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="basePath"><!-- --></A><H3>
basePath</H3>
<PRE>
private static java.lang.String <B>basePath</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="rollunderTime"><!-- --></A><H3>
rollunderTime</H3>
<PRE>
private static long <B>rollunderTime</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="rolloverTime"><!-- --></A><H3>
rolloverTime</H3>
<PRE>
private static long <B>rolloverTime</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="firstRun"><!-- --></A><H3>
firstRun</H3>
<PRE>
private static boolean <B>firstRun</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="id"><!-- --></A><H3>
id</H3>
<PRE>
private static int <B>id</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="phase1Count"><!-- --></A><H3>
phase1Count</H3>
<PRE>
private static int <B>phase1Count</B></PRE>
<DL>
<DD>Count of the number of builder tasks currently
 running in phase 1.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="phase2Count"><!-- --></A><H3>
phase2Count</H3>
<PRE>
private static int <B>phase2Count</B></PRE>
<DL>
<DD>Count of the number of builder tasks currently
 running in phase 1.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="lastRunTime"><!-- --></A><H3>
lastRunTime</H3>
<PRE>
protected java.util.Date <B>lastRunTime</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="oldLastRunTime"><!-- --></A><H3>
oldLastRunTime</H3>
<PRE>
protected java.util.Date <B>oldLastRunTime</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="session"><!-- --></A><H3>
session</H3>
<PRE>
<A HREF="../../../../arlut/csd/ganymede/server/GanymedeSession.html" title="class in arlut.csd.ganymede.server">GanymedeSession</A> <B>session</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="lock"><!-- --></A><H3>
lock</H3>
<PRE>
<A HREF="../../../../arlut/csd/ganymede/server/DBDumpLock.html" title="class in arlut.csd.ganymede.server">DBDumpLock</A> <B>lock</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="optionsCache"><!-- --></A><H3>
optionsCache</H3>
<PRE>
java.util.Vector <B>optionsCache</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="forceAllBases"><!-- --></A><H3>
forceAllBases</H3>
<PRE>
private boolean <B>forceAllBases</B></PRE>
<DL>
<DD>If this flag is true, baseChanged() will always return true,
 as a way of forcing consideration of all databases that might
 be examined by GanymedeBuilderTask subclasses.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="taskDefObjInvid"><!-- --></A><H3>
taskDefObjInvid</H3>
<PRE>
protected <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A> <B>taskDefObjInvid</B></PRE>
<DL>
<DD>Must be protected so subclasses in a different package can
 set this.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="runOnCommit"><!-- --></A><H3>
runOnCommit</H3>
<PRE>
private boolean <B>runOnCommit</B></PRE>
<DL>
<DD>Will be true if this builder task should be scheduled when a
 transaction is committed.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="handle"><!-- --></A><H3>
handle</H3>
<PRE>
private <A HREF="../../../../arlut/csd/ganymede/common/scheduleHandle.html" title="class in arlut.csd.ganymede.common">scheduleHandle</A> <B>handle</B></PRE>
<DL>
<DD>A scheduleHandle that we can use to update the admin consoles as
 to our build status.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="GanymedeBuilderTask()"><!-- --></A><H3>
GanymedeBuilderTask</H3>
<PRE>
public <B>GanymedeBuilderTask</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="setScheduleHandle(arlut.csd.ganymede.common.scheduleHandle)"><!-- --></A><H3>
setScheduleHandle</H3>
<PRE>
public void <B>setScheduleHandle</B>(<A HREF="../../../../arlut/csd/ganymede/common/scheduleHandle.html" title="class in arlut.csd.ganymede.common">scheduleHandle</A>&nbsp;handle)</PRE>
<DL>
<DD>Method used by the Ganymede scheduler to pass us a handle that we
 can use to signal the admin console as to our success or failure.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="run()"><!-- --></A><H3>
run</H3>
<PRE>
public final void <B>run</B>()</PRE>
<DL>
<DD>This method is the main entry point for the GanymedeBuilderTask.  It
 is responsible for setting up the environment for a builder task to
 operate under, and for actually invoking the builder method.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>run</CODE> in interface <CODE>java.lang.Runnable</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="run(java.lang.Object[])"><!-- --></A><H3>
run</H3>
<PRE>
public final void <B>run</B>(java.lang.Object[]&nbsp;options)</PRE>
<DL>
<DD>This method is the main entry point for the GanymedeBuilderTask.  It
 is responsible for setting up the environment for a builder task to
 operate under, and for actually invoking the builder method.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="baseChanged(short)"><!-- --></A><H3>
baseChanged</H3>
<PRE>
protected final boolean <B>baseChanged</B>(short&nbsp;baseid)</PRE>
<DL>
<DD><p>This method is used by subclasses of GanymedeBuilderTask to
 determine whether a particular base has had any modifications
 made to it since the last time this builder task was run.  This
 method works because each GanymedeBuilderTask object keeps a
 timestamp which records the last time the builder task ran.
 baseChanged() just compares that time stamp against the <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html#lastChange"><CODE>DBObjectBase.lastChange</CODE></A> time stamp
 that the <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBase</CODE></A> class
 maintains at transaction commit.  Note that this method will
 always return true the first time a particular builder task is
 run after the server is started.  This means that the first time
 a transaction is committed when you start your server, your
 builder task will wind up doing a full build.</p>

 <p>See also the <A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#baseChanged(short, java.util.List)"><CODE>baseChanged(short,
 java.util.List)</CODE></A> version of this method, which allows you to
 specify a list of fields that you are interested in testing.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>baseid</CODE> - The id number of the base to be checked</DL>
</DD>
</DL>
<HR>

<A NAME="baseChanged(int)"><!-- --></A><H3>
baseChanged</H3>
<PRE>
protected final boolean <B>baseChanged</B>(int&nbsp;baseid)</PRE>
<DL>
<DD><p>This method is used by subclasses of GanymedeBuilderTask to
 determine whether a particular base has had any modifications
 made to it since the last time this builder task was run.  This
 method works because each GanymedeBuilderTask object keeps a
 timestamp which records the last time the builder task ran.
 baseChanged() just compares that time stamp against the <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html#lastChange"><CODE>DBObjectBase.lastChange</CODE></A> time stamp
 that the <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBase.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBase</CODE></A> class
 maintains at transaction commit.  Note that this method will
 always return true the first time a particular builder task is
 run after the server is started.  This means that the first time
 a transaction is committed when you start your server, your
 builder task will wind up doing a full build.</p>

 <p>See also the <A HREF="../../../../arlut/csd/ganymede/server/GanymedeBuilderTask.html#baseChanged(short, java.util.List)"><CODE>baseChanged(short,
 java.util.List)</CODE></A> version of this method, which allows you to
 specify a list of fields that you are interested in testing.</p>

 <p>Note: This variant of baseChanged() takes an int and casts it to
 a short to remove the need from casting literals on the caller's
 behalf.  If the baseid does not fit in the 16 bit two's
 complement short range, an IllegalArgumentExceptio will be
 thrown.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>baseid</CODE> - The id number of the base to be checked</DL>
</DD>
</DL>
<HR>

<A NAME="baseChanged(short, java.util.List)"><!-- --></A><H3>
baseChanged</H3>
<PRE>
protected final boolean <B>baseChanged</B>(short&nbsp;baseid,
                                    java.util.List&nbsp;fieldIds)</PRE>
<DL>
<DD><p>This method is used by subclasses of GanymedeBuilderTask to
 determine whether a particular field of a particular base has had
 any modifications made to it since the last time this builder
 task was run.  This method works because each GanymedeBuilderTask
 object keeps a set of timestamp which records the last time the
 builder task ran.  baseChanged() just compares that time stamp
 against the <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBaseField.html#lastChange"><CODE>DBObjectBaseField.lastChange</CODE></A> time
 stamp that the <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBaseField.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBaseField</CODE></A> class maintains at
 transaction commit.  Note that this method will always return
 true the first time a particular builder task is run after the
 server is started.  This means that the first time a transaction
 is committed when you start your server, your builder task will
 wind up doing a full build.</p>

 <p>Otherwise, if none of the fields listed have changed since
 this GanymedeBuilderTask was last run, baseChanged() will return
 false.  If any of the fields in the fieldIds list have changed
 since this GanymedeBuilderTask last ran, baseChanged() will
 return true.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>baseid</CODE> - The id number of the base to be checked<DD><CODE>fieldIds</CODE> - A list of java.lang.Short's containing the
 id numbers of the fields to examine.</DL>
</DD>
</DL>
<HR>

<A NAME="baseChanged(int, java.util.List)"><!-- --></A><H3>
baseChanged</H3>
<PRE>
protected final boolean <B>baseChanged</B>(int&nbsp;baseid,
                                    java.util.List&nbsp;fieldIds)</PRE>
<DL>
<DD><p>This method is used by subclasses of GanymedeBuilderTask to
 determine whether a particular field of a particular base has had
 any modifications made to it since the last time this builder
 task was run.  This method works because each GanymedeBuilderTask
 object keeps a set of timestamp which records the last time the
 builder task ran.  baseChanged() just compares that time stamp
 against the <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBaseField.html#lastChange"><CODE>DBObjectBaseField.lastChange</CODE></A> time
 stamp that the <A HREF="../../../../arlut/csd/ganymede/server/DBObjectBaseField.html" title="class in arlut.csd.ganymede.server"><CODE>DBObjectBaseField</CODE></A> class maintains at
 transaction commit.  Note that this method will always return
 true the first time a particular builder task is run after the
 server is started.  This means that the first time a transaction
 is committed when you start your server, your builder task will
 wind up doing a full build.</p>

 <p>Otherwise, if none of the fields listed have changed since
 this GanymedeBuilderTask was last run, baseChanged() will return
 false.  If any of the fields in the fieldIds list have changed
 since this GanymedeBuilderTask last ran, baseChanged() will
 return true.</p>

 <p>Note: This variant of baseChanged() takes an int and casts it
 to a short to remove the need from casting literals on the
 caller's behalf.  If the baseid does not fit in the 16 bit two's
 complement short range, an IllegalArgumentException will be
 thrown.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>baseid</CODE> - The id number of the base to be checked<DD><CODE>fieldIds</CODE> - A list of java.lang.Short's containing the
 id numbers of the fields to examine.</DL>
</DD>
</DL>
<HR>

<A NAME="enumerateObjects(short)"><!-- --></A><H3>
enumerateObjects</H3>
<PRE>
protected final java.util.Enumeration <B>enumerateObjects</B>(short&nbsp;baseid)</PRE>
<DL>
<DD><p>This method is used by subclasses of GanymedeBuilderTask to
 obtain a list of DBObject references of the requested
 type.</p>

 <p>Note that the Enumeration returned by this method MUST NOT
 be used after builderPhase1() returns.  This Enumeration is
 only valid while the base in question is locked with the
 global dumpLock obtained before builderPhase1() is run and
 which is released after builderPhase1() returns.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>baseid</CODE> - The id number of the base to be listed
<DT><B>Returns:</B><DD>An Enumeration of <A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server"><CODE>DBObject</CODE></A> references</DL>
</DD>
</DL>
<HR>

<A NAME="enumerateObjects(int)"><!-- --></A><H3>
enumerateObjects</H3>
<PRE>
protected final java.util.Enumeration <B>enumerateObjects</B>(int&nbsp;baseid)</PRE>
<DL>
<DD><p>This method is used by subclasses of GanymedeBuilderTask to
 obtain a list of DBObject references of the requested
 type.</p>

 <p>Note that the Enumeration returned by this method MUST NOT
 be used after builderPhase1() returns.  This Enumeration is
 only valid while the base in question is locked with the
 global dumpLock obtained before builderPhase1() is run and
 which is released after builderPhase1() returns.</p>

 <p>Note: This variant of enumerateObjects takes an int and casts it
 to a short to remove the need from casting constants on the
 caller's behalf.  If the baseid does not fit in the 16 bit two's
 complement short range, an IllegalArgumentException will be
 thrown.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>baseid</CODE> - The id number of the base to be listed
<DT><B>Returns:</B><DD>An Enumeration of <A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server"><CODE>DBObject</CODE></A> references</DL>
</DD>
</DL>
<HR>

<A NAME="getObjects(short)"><!-- --></A><H3>
getObjects</H3>
<PRE>
protected final java.lang.Iterable&lt;<A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server">DBObject</A>&gt; <B>getObjects</B>(short&nbsp;baseid)</PRE>
<DL>
<DD><p>This method is used by subclasses of GanymedeBuilderTask to
 obtain a list of DBObject references of the requested
 type.</p>

 <p>Note that the Iterable returned by this method MUST NOT
 be used after builderPhase1() returns.  This Iterable is
 only valid while the base in question is locked with the
 global dumpLock obtained before builderPhase1() is run and
 which is released after builderPhase1() returns.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>baseid</CODE> - The id number of the base to be listed
<DT><B>Returns:</B><DD>An Iterable of <A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server"><CODE>DBObject</CODE></A> references</DL>
</DD>
</DL>
<HR>

<A NAME="getObjects(int)"><!-- --></A><H3>
getObjects</H3>
<PRE>
protected final java.lang.Iterable&lt;<A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server">DBObject</A>&gt; <B>getObjects</B>(int&nbsp;baseid)</PRE>
<DL>
<DD><p>This method is used by subclasses of GanymedeBuilderTask to
 obtain a list of DBObject references of the requested
 type.</p>

 <p>Note that the Iterable returned by this method MUST NOT
 be used after builderPhase1() returns.  This Iterable is
 only valid while the base in question is locked with the
 global dumpLock obtained before builderPhase1() is run and
 which is released after builderPhase1() returns.</p>

 <p>Note: This variant of getObjects() takes an int and casts it
 to a short to remove the need from casting constants on the
 caller's behalf.  If the baseid does not fit in the 16 bit two's
 complement short range, an IllegalArgumentException will be
 thrown.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>baseid</CODE> - The id number of the base to be listed
<DT><B>Returns:</B><DD>An Iterable of <A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server"><CODE>DBObject</CODE></A> references</DL>
</DD>
</DL>
<HR>

<A NAME="getObject(arlut.csd.ganymede.common.Invid)"><!-- --></A><H3>
getObject</H3>
<PRE>
protected final <A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server">DBObject</A> <B>getObject</B>(<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&nbsp;invid)</PRE>
<DL>
<DD>This method is used by subclasses of GanymedeBuilderTask to
 obtain a reference to a <A HREF="../../../../arlut/csd/ganymede/server/DBObject.html" title="class in arlut.csd.ganymede.server"><CODE>DBObject</CODE></A>
 matching a given invid.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>invid</CODE> - The object id of the object to be viewed</DL>
</DD>
</DL>
<HR>

<A NAME="getLabel(arlut.csd.ganymede.common.Invid)"><!-- --></A><H3>
getLabel</H3>
<PRE>
protected final java.lang.String <B>getLabel</B>(<A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A>&nbsp;invid)</PRE>
<DL>
<DD>This method is used by subclasses of GanymedeBuilderTask to
 obtain the label for an object.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>invid</CODE> - The object id of the object label to be retrieved</DL>
</DD>
</DL>
<HR>

<A NAME="findLabeledObject(java.lang.String, short)"><!-- --></A><H3>
findLabeledObject</H3>
<PRE>
protected final <A HREF="../../../../arlut/csd/ganymede/common/Invid.html" title="class in arlut.csd.ganymede.common">Invid</A> <B>findLabeledObject</B>(java.lang.String&nbsp;label,
                                        short&nbsp;type)</PRE>
<DL>
<DD>Finds an invid by title.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="builderPhase1()"><!-- --></A><H3>
builderPhase1</H3>
<PRE>
public abstract boolean <B>builderPhase1</B>()</PRE>
<DL>
<DD><p>This method is intended to be overridden by subclasses of
 GanymedeBuilderTask.</p>

 <p>This method runs with a dumpLock obtained for the builder task.</p>

 <p>Code run in builderPhase1() can call enumerateObjects() and
 baseChanged().  Note that the Enumeration of objects returned
 by enumerateObjects() is only valid and should only be consulted
 while builderPhase1 is running.. as soon as builderPhase1 returns,
 the dumpLock used to make the enumerateObjects() call safe to
 use is relinquished, and any Enumerations obtained will then
 be unsafe to depend on.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>true if builderPhase1 made changes necessitating the
 execution of builderPhase2.</DL>
</DD>
</DL>
<HR>

<A NAME="builderPhase2()"><!-- --></A><H3>
builderPhase2</H3>
<PRE>
public abstract boolean <B>builderPhase2</B>()</PRE>
<DL>
<DD><p>This method is intended to be overridden by subclasses of
 GanymedeBuilderTask.</p>

 <p>This method runs after this task's dumpLock has been
 relinquished.  This method is intended to be used to finish off a
 build process by running (probably external) code that does not
 require direct access to the database.</p>

 <p>For instance, for an NIS builder task, builderPhase1() would scan
 the Ganymede object store and write out NIS-compatible source
 files.  builderPhase1() would return, the run() method drops the
 dump lock so that other transactions can be committed, and then
 builderPhase2() can be run to turn those on-disk files written by
 builderPhase1() into NIS maps.  This generally involves executing
 an external Makefile, which can take an indeterminate period of
 time.</p>

 <p>It is important that any external process run by
 builderPhase2() blocks until it is finished doing the build.  If
 the external script tries to put itself into the background and
 return early, the Ganymede server will conclude that the external
 build has completely finished, and it will feel free to
 immediately schedule this builder task again, which may mean that
 the builderPhase1() method will overwrite files the backgrounded
 external builder process is still using.</p>

 <p>Note as well that the Ganymede server makes no guarantee as to
 what the environment variables or current working directory will
 be set to when any external builder scripts are executed.  If
 your external scripts depend on these things, you should make
 sure that your external builder script sets them itself.</p>

 <p>By releasing the dumpLock before we get to that point, we
 minimize contention for users of the system.</p>

 <p>As a result of having dropped the dumpLock, enumerateObjects()
 cannot be called by this method.</p>

 <p>builderPhase2() can throw a ServiceNotFoundException or
 ServiceFailedException to indicate to the admin console that the
 build failed, or it can simply return a boolean result to
 indicate the same in a less specific fashion.</p>

 <p>builderPhase2 is only run if builderPhase1 returns true.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isOptionSet(java.lang.String)"><!-- --></A><H3>
isOptionSet</H3>
<PRE>
protected boolean <B>isOptionSet</B>(java.lang.String&nbsp;option)</PRE>
<DL>
<DD><p>This method looks in the optionStrings field in the task
 object associated with this task and determines whether the given
 option name is present in the field.  This works only if this
 builder task was registered with taskDefObjInvid set by a
 subclass whose constructor takes an Invid parameter and which
 sets taskDefObjInvid in GanymedeBuilderTask.</p>

 <p>That is, if the task object for this task has an option strings
 vector with the following contents:</p>

 <pre>
  useMD5
  useShadow
 </pre>

 <p>then a call to isOptionSet with 'useMD5' or 'useShadow', of
 any capitalization, will return true.  Any other parameter
 provided to isOptionSet() will cause null to be returned.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getOptionValue(java.lang.String)"><!-- --></A><H3>
getOptionValue</H3>
<PRE>
protected java.lang.String <B>getOptionValue</B>(java.lang.String&nbsp;option)</PRE>
<DL>
<DD><p>This method retrieves the value associated with the provided
 option name if this builder task was registered with taskDefObjInvid
 set by a subclass whose constructor takes an Invid parameter and which
 sets taskDefObjInvid in GanymedeBuilderTask.</p>

 <p>getOptionValue() will search through the option strings for
 the task object associated with this task and return the
 substring after the '=' character, if the option name is found on
 the left.</p>

 <p>That is, if the task object for this task has an option strings
 vector with the following contents:</p>

 <pre>
  useMD5
  buildPath=/var/ganymede/schema/NT
  useShadow
 </pre>

 <p>then a call to getOptionValue() with 'buildPath', of any capitalization,
 as the parameter will return '/var/ganymede/schema/NT'.</p>

 <p>Any other parameter provided to getOptionValue() will cause null to 
 be returned.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getOptionStrings()"><!-- --></A><H3>
getOptionStrings</H3>
<PRE>
final java.util.Vector <B>getOptionStrings</B>()</PRE>
<DL>
<DD>This method returns the Vector of option strings registered
 for this task object in the Ganymede database, or null if no
 option strings are defined.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="runsOnCommit()"><!-- --></A><H3>
runsOnCommit</H3>
<PRE>
public final boolean <B>runsOnCommit</B>()</PRE>
<DL>
<DD>Returns true if this builder task should be scheduled when a
 transaction commits.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="runOnCommit(boolean)"><!-- --></A><H3>
runOnCommit</H3>
<PRE>
public void <B>runOnCommit</B>(boolean&nbsp;state)</PRE>
<DL>
<DD>Call this method to control whether or not this builder task
 should be run when the Ganymede server commits a transaction.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="openOutFile(java.lang.String)"><!-- --></A><H3>
openOutFile</H3>
<PRE>
protected java.io.PrintWriter <B>openOutFile</B>(java.lang.String&nbsp;filename)
                                   throws java.io.IOException</PRE>
<DL>
<DD><p>This method opens the specified file for writing out a text stream.</p>

 <p>If the <code>ganymede.builder.backups</code> property is set to a
 path in the Ganymede server's ganymede.properties file,
 openOutFile() will look to see if the filename provided as a
 parameter already exists.  If it does, it will be copied to a
 subdirectory of the <code>ganymede.builder.backups</code>
 directory.  This subdirectory will be named with the date in
 which the backups therein were copied.</p>

 <p>If <code>ganymede.builder.backups</code> is set, the first time
 openOutFile() is called after midnight, openOutFile will zip all
 the files in any preceding days' backup subdirectories into one
 zip file per day.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>filename</CODE> - The fully specified path to the file to open
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="openOutFile(java.lang.String, java.lang.String)"><!-- --></A><H3>
openOutFile</H3>
<PRE>
protected java.io.PrintWriter <B>openOutFile</B>(java.lang.String&nbsp;filename,
                                          java.lang.String&nbsp;taskName)
                                   throws java.io.IOException</PRE>
<DL>
<DD><p>This method opens the specified file for writing out a text stream.</p>

 <p>If the <code>ganymede.builder.backups</code> property is set to a
 path in the Ganymede server's ganymede.properties file,
 openOutFile() will look to see if the filename provided as a
 parameter already exists.  If it does, it will be copied to a
 subdirectory of the <code>ganymede.builder.backups</code>
 directory.  This subdirectory will be named with the date in
 which the backups therein were copied.</p>

 <p>If <code>ganymede.builder.backups</code> is set, the first time
 openOutFile() is called after midnight, openOutFile will zip all
 the files in any preceding days' backup subdirectories into one
 zip file per day.</p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>filename</CODE> - The name of the file to open<DD><CODE>taskName</CODE> - The name of the builder task that is writing this file.  Used
 to create a unique name (across tasks) for the backup copy of the file when
 we overwrite an existing file.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="incBusy(java.lang.String)"><!-- --></A><H3>
incBusy</H3>
<PRE>
private static void <B>incBusy</B>(java.lang.String&nbsp;path)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="decBusy(java.lang.String)"><!-- --></A><H3>
decBusy</H3>
<PRE>
private static void <B>decBusy</B>(java.lang.String&nbsp;path)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="busyCount(java.lang.String)"><!-- --></A><H3>
busyCount</H3>
<PRE>
private static int <B>busyCount</B>(java.lang.String&nbsp;path)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="openBackupDirectory(java.lang.String)"><!-- --></A><H3>
openBackupDirectory</H3>
<PRE>
private static void <B>openBackupDirectory</B>(java.lang.String&nbsp;filename)
                                 throws java.io.IOException</PRE>
<DL>
<DD>This method is called before the server's builder
 tasks are run and creates a backup directory for
 files to be copied to.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="cleanBackupDirectory()"><!-- --></A><H3>
cleanBackupDirectory</H3>
<PRE>
private static void <B>cleanBackupDirectory</B>()
                                  throws java.io.IOException</PRE>
<DL>
<DD>This static method is run before the first time a builder task
 writes any file on server start-up.  It is responsible for sweeping
 through the system backup directory and zipping up any day directories
 that are lingering from earlier runs.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getPhase1Count()"><!-- --></A><H3>
getPhase1Count</H3>
<PRE>
public static int <B>getPhase1Count</B>()</PRE>
<DL>
<DD>This is public for GanymedeSession.openTransaction(), as a
 hack to support proper updating of the client's status icon on
 client connect.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPhase2Count()"><!-- --></A><H3>
getPhase2Count</H3>
<PRE>
public static int <B>getPhase2Count</B>()</PRE>
<DL>
<DD>This is public for GanymedeSession.openTransaction(), as a
 hack to support proper updating of the client's status icon on
 client connect.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="incPhase1(boolean)"><!-- --></A><H3>
incPhase1</H3>
<PRE>
static void <B>incPhase1</B>(boolean&nbsp;update)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="decPhase1(boolean)"><!-- --></A><H3>
decPhase1</H3>
<PRE>
static void <B>decPhase1</B>(boolean&nbsp;update)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="incPhase2(boolean)"><!-- --></A><H3>
incPhase2</H3>
<PRE>
static void <B>incPhase2</B>(boolean&nbsp;update)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="decPhase2(boolean)"><!-- --></A><H3>
decPhase2</H3>
<PRE>
static void <B>decPhase2</B>(boolean&nbsp;update)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="updateBuildStatus()"><!-- --></A><H3>
updateBuildStatus</H3>
<PRE>
static void <B>updateBuildStatus</B>()</PRE>
<DL>
<DD>This method is called by the GanymedeBuilderTask base class to
 record that the server is processing a build.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/GanymedeBuilderTask.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/GanymedeAdmin.html" title="class in arlut.csd.ganymede.server"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../arlut/csd/ganymede/server/GanymedeExpirationTask.html" title="class in arlut.csd.ganymede.server"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?arlut/csd/ganymede/server/GanymedeBuilderTask.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="GanymedeBuilderTask.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
