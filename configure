#!/bin/sh

echo "Ganymede configure script"
echo

# Find the source files, if location was not specified.

# Try the directory containing this script, then its parent.

prog=$0

GROOTDIR=`echo $prog|sed 's%/[^/][^/]*$%%'`
# if the program name is the same as the srcdir name, we have no path
# set.. must be .
test "x$GROOTDIR" = "x$prog" && GROOTDIR=.
if test ! -d $GROOTDIR/src/classes; then
  echo "configure: error: can not find sources in $rootdir" 1>&2; exit 1;
fi
export GROOTDIR



# Find perl (GPERL)

guessperl=`which perl5`

 if test ! -r "$guessperl"; then
  guessperl=`which perl`
 fi

echo "Where is perl5 installed? [$guessperl] \c" 

read userperl


if  test ! -z "$userperl"; then
	GPERL=$userperl
    else
	GPERL=$guessperl
fi

# echo $GPERL
export GPERL



# Find java

guessjava=`which java`
guessjava=`dirname ${guessjava}`

echo "What is the location of the directory where java is installed? [$guessjava] \c"

read userjava

if  test ! -z "$userjava"; then
	GJAVA=$userjava
    else
	GJAVA=$guessjava
fi

# echo $GJAVA
export GJAVA



# Get desired location of generated class files

if [ "$1" = "-develop" ]
    then
    echo "Where should the class files be located? \c"
    read GCLASSDIR
fi

# echo $GCLASSDIR
export GCLASSDIR


$GPERL $GROOTDIR/scripts/configurator.perl
